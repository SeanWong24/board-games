import{r as t,c as i,h as n,H as e,d as r,e as o,f as s,w as a}from"./p-254cd0e5.js";import{g as c,c as l,a as u}from"./p-5da6f87a.js";import{GESTURE_CONTROLLER as h}from"./p-78321f41.js";import{n as d,h as f,d as p,f as m,i as v,a as b,c as g,b as w}from"./p-f1913487.js";import{o as y,c as x,h as k}from"./p-5b51185b.js";import{i as j,g as O,a as S}from"./p-dacf0cf1.js";import{g as E}from"./p-177ede88.js";import"./p-7261e130.js";import"./p-56193620.js";import{m as C}from"./p-d9c3a472.js";import{l as I,t as M,s as T,L as P,a as _,b as D}from"./p-0bd0a467.js";import{a as A}from"./p-718ae824.js";const R=class{constructor(n){t(this,n),this.messageSend=i(this,"messageSend",7)}render(){var t;return n(e,null,n("ion-content",null,null===(t=this.messageList)||void 0===t?void 0:t.map(t=>n("ion-card",null,n("ion-card-header",null,n("ion-card-subtitle",null,t.nickname)),n("ion-card-content",null,t.message)))),n("ion-button",{onClick:()=>{this.messageSend.emit(prompt("Enter your message"))}},"Send New"))}};function z(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}R.style=":host{display:block}ion-content{height:calc(100% - 300px)}";var N,L=(function(t){parcelRequire=function(i,n,e){var r,o="function"==typeof parcelRequire&&parcelRequire,s=z;function a(t,e){if(!n[t]){if(!i[t]){var r="function"==typeof parcelRequire&&parcelRequire;if(!e&&r)return r(t,!0);if(o)return o(t,!0);if(s&&"string"==typeof t)return s(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}u.resolve=function(n){return i[t][1][n]||n},u.cache={};var l=n[t]=new a.Module(t);i[t][0].call(l.exports,u,l,l.exports,this)}return n[t].exports;function u(t){return a(u.resolve(t))}}a.isParcelRequire=!0,a.Module=function(t){this.id=t,this.bundle=a,this.exports={}},a.modules=i,a.cache=n,a.parent=o,a.register=function(t,n){i[t]=[function(t,i){i.exports=n},{}]};for(var c=0;c<e.length;c++)try{a(e[c])}catch(i){r||(r=i)}if(e.length){var l=a(e[e.length-1]);t.exports=l}if(parcelRequire=a,r)throw r;return a}({EgBh:[function(t,i){var n={};n.useBlobBuilder=function(){try{return new Blob([]),!1}catch(n){return!0}}(),n.useArrayBufferView=!n.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(n){return!0}}(),i.exports.binaryFeatures=n;var e=i.exports.BlobBuilder;function r(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(e=i.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),r.prototype.append=function(t){"number"==typeof t?this._pieces.push(t):(this.flush(),this._parts.push(t))},r.prototype.flush=function(){if(this._pieces.length>0){var t=new Uint8Array(this._pieces);n.useArrayBufferView||(t=t.buffer),this._parts.push(t),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),n.useBlobBuilder){for(var t=new e,i=0,r=this._parts.length;i<r;i++)t.append(this._parts[i]);return t.getBlob()}return new Blob(this._parts)},i.exports.BufferBuilder=r},{}],kdPp:[function(t,i){var n=t("./bufferbuilder").BufferBuilder,e=t("./bufferbuilder").binaryFeatures;function r(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function o(){this.bufferBuilder=new n}function s(t){var i=t.charCodeAt(0);return i<=2047?"00":i<=65535?"000":i<=2097151?"0000":i<=67108863?"00000":"000000"}i.exports={unpack:function(t){return new r(t).unpack()},pack:function(t){var i=new o;return i.pack(t),i.getBuffer()}},r.prototype.unpack=function(){var t,i=this.unpack_uint8();if(i<128)return i;if((224^i)<32)return(224^i)-32;if((t=160^i)<=15)return this.unpack_raw(t);if((t=176^i)<=15)return this.unpack_string(t);if((t=144^i)<=15)return this.unpack_array(t);if((t=128^i)<=15)return this.unpack_map(t);switch(i){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}},r.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},r.prototype.unpack_uint16=function(){var t=this.read(2),i=256*(255&t[0])+(255&t[1]);return this.index+=2,i},r.prototype.unpack_uint32=function(){var t=this.read(4),i=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,i},r.prototype.unpack_uint64=function(){var t=this.read(8),i=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,i},r.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256},r.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536},r.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},r.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},r.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var i=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,i},r.prototype.unpack_string=function(t){for(var i,n,e=this.read(t),r=0,o="";r<t;)(i=e[r])<128?(o+=String.fromCharCode(i),r++):(192^i)<32?(n=(192^i)<<6|63&e[r+1],o+=String.fromCharCode(n),r+=2):(n=(15&i)<<12|(63&e[r+1])<<6|63&e[r+2],o+=String.fromCharCode(n),r+=3);return this.index+=t,o},r.prototype.unpack_array=function(t){for(var i=new Array(t),n=0;n<t;n++)i[n]=this.unpack();return i},r.prototype.unpack_map=function(t){for(var i={},n=0;n<t;n++){var e=this.unpack(),r=this.unpack();i[e]=r}return i},r.prototype.unpack_float=function(){var t=this.unpack_uint32();return(0==t>>31?1:-1)*(8388607&t|8388608)*Math.pow(2,(t>>23&255)-127-23)},r.prototype.unpack_double=function(){var t=this.unpack_uint32(),i=this.unpack_uint32(),n=(t>>20&2047)-1023;return(0==t>>31?1:-1)*((1048575&t|1048576)*Math.pow(2,n-20)+i*Math.pow(2,n-52))},r.prototype.read=function(t){var i=this.index;if(i+t<=this.length)return this.dataView.subarray(i,i+t);throw new Error("BinaryPackFailure: read index out of range")},o.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},o.prototype.pack=function(t){var i=typeof t;if("string"===i)this.pack_string(t);else if("number"===i)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"===i)!0===t?this.bufferBuilder.append(195):!1===t&&this.bufferBuilder.append(194);else if("undefined"===i)this.bufferBuilder.append(192);else{if("object"!==i)throw new Error('Type "'+i+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)this.pack_bin(e.useArrayBufferView?new Uint8Array(t):t);else if("BYTES_PER_ELEMENT"in t)this.pack_bin(e.useArrayBufferView?new Uint8Array(t.buffer):t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},o.prototype.pack_bin=function(t){var i=t.length||t.byteLength||t.size;if(i<=15)this.pack_uint8(160+i);else if(i<=65535)this.bufferBuilder.append(218),this.pack_uint16(i);else{if(!(i<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(i)}this.bufferBuilder.append(t)},o.prototype.pack_string=function(t){var i=function(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,s).length}(t);if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this.bufferBuilder.append(216),this.pack_uint16(i);else{if(!(i<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(i)}this.bufferBuilder.append(t)},o.prototype.pack_array=function(t){var i=t.length;if(i<=15)this.pack_uint8(144+i);else if(i<=65535)this.bufferBuilder.append(220),this.pack_uint16(i);else{if(!(i<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(i)}for(var n=0;n<i;n++)this.pack(t[n])},o.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(255&t);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&t<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&t<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},o.prototype.pack_double=function(t){var i=0;t<0&&(i=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),e=t/Math.pow(2,n)-1,r=Math.floor(e*Math.pow(2,52)),o=Math.pow(2,32),s=i<<31|n+1023<<20|r/o&1048575,a=r%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)},o.prototype.pack_object=function(t){var i=Object.keys(t).length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this.bufferBuilder.append(222),this.pack_uint16(i);else{if(!(i<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(i)}for(var n in t)t.hasOwnProperty(n)&&(this.pack(n),this.pack(t[n]))},o.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},o.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},o.prototype.pack_uint32=function(t){var i=4294967295&t;this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)},o.prototype.pack_uint64=function(t){var i=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},o.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},o.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},o.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},o.prototype.pack_int64=function(t){var i=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)}},{"./bufferbuilder":"EgBh"}],iSxC:[function(t,i,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.extractVersion=s,n.wrapPeerConnectionEvent=function(t,i,n){if(t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype,r=e.addEventListener;e.addEventListener=function(t,e){if(t!==i)return r.apply(this,arguments);var o=function(t){var i=n(t);i&&e(i)};return this._eventMap=this._eventMap||{},this._eventMap[e]=o,r.apply(this,[t,o])};var o=e.removeEventListener;e.removeEventListener=function(t,n){if(t!==i||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var e=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[t,e])},Object.defineProperty(e,"on"+i,{get:function(){return this["_on"+i]},set:function(t){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),t&&this.addEventListener(i,this["_on"+i]=t)},enumerable:!0,configurable:!0})}},n.disableLog=function(t){return"boolean"!=typeof t?new Error("Argument type: "+e(t)+". Please use a boolean."):(r=t,t?"adapter.js logging disabled":"adapter.js logging enabled")},n.disableWarnings=function(t){return"boolean"!=typeof t?new Error("Argument type: "+e(t)+". Please use a boolean."):(o=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))},n.log=function(){if("object"===("undefined"==typeof window?"undefined":e(window))){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(t,i){o&&console.warn(t+" is deprecated, please use "+i+" instead.")},n.detectBrowser=function(t){var{navigator:i}=t,n={browser:null,version:null};if(void 0===t||!t.navigator)return n.browser="Not a browser.",n;if(i.mozGetUserMedia)n.browser="firefox",n.version=s(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===t.isSecureContext&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)n.browser="chrome",n.version=s(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=s(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=s(i.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype}return n},n.compactObject=function t(i){return a(i)?Object.keys(i).reduce((function(n,e){var r=a(i[e]),o=r?t(i[e]):i[e],s=r&&!Object.keys(o).length;return void 0===o||s?n:Object.assign(n,function(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}({},e,o))}),{}):i},n.walkStats=c,n.filterStats=function(t,i,n){var e=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===i)return r;var o=[];return t.forEach((function(t){"track"===t.type&&t.trackIdentifier===i.id&&o.push(t)})),o.forEach((function(i){t.forEach((function(n){n.type===e&&n.trackId===i.id&&c(t,n,r)}))})),r};var r=!0,o=!0;function s(t,i,n){var e=t.match(i);return e&&e.length>=n&&parseInt(e[n],10)}function a(t){return"[object Object]"===Object.prototype.toString.call(t)}function c(t,i,n){i&&!n.has(i.id)&&(n.set(i.id,i),Object.keys(i).forEach((function(e){e.endsWith("Id")?c(t,t.get(i[e]),n):e.endsWith("Ids")&&i[e].forEach((function(i){c(t,t.get(i),n)}))})))}},{}],s6SN:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(t){var i=t&&t.navigator;if(i.mediaDevices){var n=e.detectBrowser(t),s=function(t){if("object"!==r(t)||t.mandatory||t.optional)return t;var i={};return Object.keys(t).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var e="object"===r(t[n])?t[n]:{ideal:t[n]};void 0!==e.exact&&"number"==typeof e.exact&&(e.min=e.max=e.exact);var o=function(t,i){return t?t+i.charAt(0).toUpperCase()+i.slice(1):"deviceId"===i?"sourceId":i};if(void 0!==e.ideal){i.optional=i.optional||[];var s={};"number"==typeof e.ideal?(s[o("min",n)]=e.ideal,i.optional.push(s),(s={})[o("max",n)]=e.ideal,i.optional.push(s)):(s[o("",n)]=e.ideal,i.optional.push(s))}void 0!==e.exact&&"number"!=typeof e.exact?(i.mandatory=i.mandatory||{},i.mandatory[o("",n)]=e.exact):["min","max"].forEach((function(t){void 0!==e[t]&&(i.mandatory=i.mandatory||{},i.mandatory[o(t,n)]=e[t])}))}})),t.advanced&&(i.optional=(i.optional||[]).concat(t.advanced)),i},a=function(t,e){if(n.version>=61)return e(t);if((t=JSON.parse(JSON.stringify(t)))&&"object"===r(t.audio)){var a=function(t,i,n){i in t&&!(n in t)&&(t[n]=t[i],delete t[i])};a((t=JSON.parse(JSON.stringify(t))).audio,"autoGainControl","googAutoGainControl"),a(t.audio,"noiseSuppression","googNoiseSuppression"),t.audio=s(t.audio)}if(t&&"object"===r(t.video)){var c=t.video.facingMode;c=c&&("object"===r(c)?c:{ideal:c});var l,u=n.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||u)&&(delete t.video.facingMode,"environment"===c.exact||"environment"===c.ideal?l=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(l=["front"]),l))return i.mediaDevices.enumerateDevices().then((function(i){var n=(i=i.filter((function(t){return"videoinput"===t.kind}))).find((function(t){return l.some((function(i){return t.label.toLowerCase().includes(i)}))}));return!n&&i.length&&l.includes("back")&&(n=i[i.length-1]),n&&(t.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),t.video=s(t.video),o("chrome: "+JSON.stringify(t)),e(t)}));t.video=s(t.video)}return o("chrome: "+JSON.stringify(t)),e(t)},c=function(t){return n.version>=64?t:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[t.name]||t.name,message:t.message,constraint:t.constraint||t.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(i.getUserMedia=function(t,n,e){a(t,(function(t){i.webkitGetUserMedia(t,n,(function(t){e&&e(c(t))}))}))}.bind(i),i.mediaDevices.getUserMedia){var l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(t){return a(t,(function(t){return l(t).then((function(i){if(t.audio&&!i.getAudioTracks().length||t.video&&!i.getVideoTracks().length)throw i.getTracks().forEach((function(t){t.stop()})),new DOMException("","NotFoundError");return i}),(function(t){return Promise.reject(c(t))}))}))}}}};var e=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(t("../utils.js"));function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=e.log},{"../utils.js":"iSxC"}],VHa8:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(t,i){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&("function"==typeof i?t.navigator.mediaDevices.getDisplayMedia=function(n){return i(n).then((function(i){var e=n.video&&n.video.width,r=n.video&&n.video.height;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:n.video&&n.video.frameRate||3}},e&&(n.video.mandatory.maxWidth=e),r&&(n.video.mandatory.maxHeight=r),t.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],uI5X:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimMediaStream=function(t){t.MediaStream=t.MediaStream||t.webkitMediaStream},n.shimOnTrack=function(t){if("object"!==a(t)||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)e.wrapPeerConnectionEvent(t,"track",(function(t){return t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t}));else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});var i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(i){i.stream.addEventListener("addtrack",(function(e){var r;r=t.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(t){return t.track&&t.track.id===e.track.id})):{track:e.track};var o=new Event("track");o.track=e.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[i.stream],n.dispatchEvent(o)})),i.stream.getTracks().forEach((function(e){var r;r=t.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(t){return t.track&&t.track.id===e.id})):{track:e};var o=new Event("track");o.track=e,o.receiver=r,o.transceiver={receiver:r},o.streams=[i.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}},n.shimGetSendersWithDtmf=function(t){if("object"===a(t)&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){var i=function(t,i){return{track:i,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===i.kind?t.createDTMFSender(i):null),this._dtmf},_pc:t}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,e){var r=n.apply(this,arguments);return r||(r=i(this,t),this._senders.push(r)),r};var e=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){e.apply(this,arguments);var i=this._senders.indexOf(t);-1!==i&&this._senders.splice(i,1)}}var r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){var n=this;this._senders=this._senders||[],r.apply(this,[t]),t.getTracks().forEach((function(t){n._senders.push(i(n,t))}))};var o=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){var i=this;this._senders=this._senders||[],o.apply(this,[t]),t.getTracks().forEach((function(t){var n=i._senders.find((function(i){return i.track===t}));n&&i._senders.splice(i._senders.indexOf(n),1)}))}}else if("object"===a(t)&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){var s=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){var t=this,i=s.apply(this,[]);return i.forEach((function(i){return i._pc=t})),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},n.shimGetStats=function(t){if(t.RTCPeerConnection){var i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){var t=this,[n,e,r]=arguments;if(arguments.length>0&&"function"==typeof n)return i.apply(this,arguments);if(0===i.length&&(0===arguments.length||"function"!=typeof n))return i.apply(this,[]);var o=function(t){var i={};return t.result().forEach((function(t){var n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach((function(i){n[i]=t.stat(i)})),i[n.id]=n})),i},s=function(t){return new Map(Object.keys(t).map((function(i){return[i,t[i]]})))};return arguments.length>=2?i.apply(this,[function(t){e(s(o(t)))},n]):new Promise((function(n,e){i.apply(t,[function(t){n(s(o(t)))},e])})).then(e,r)}}},n.shimSenderReceiverGetStats=function(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var i=t.RTCPeerConnection.prototype.getSenders;i&&(t.RTCPeerConnection.prototype.getSenders=function(){var t=this,n=i.apply(this,[]);return n.forEach((function(i){return i._pc=t})),n});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var t=n.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then((function(i){return e.filterStats(i,t.track,!0)}))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){var t=this,i=r.apply(this,[]);return i.forEach((function(i){return i._pc=t})),i}),e.wrapPeerConnectionEvent(t,"track",(function(t){return t.receiver._pc=t.srcElement,t})),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then((function(i){return e.filterStats(i,t.track,!1)}))}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var i,n,e,r=arguments[0];return this.getSenders().forEach((function(t){t.track===r&&(i?e=!0:i=t)})),this.getReceivers().forEach((function(t){return t.track===r&&(n?e=!0:n=t),t.track===r})),e||i&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=c,n.shimAddTrackRemoveTrack=function(t){if(t.RTCPeerConnection){var i=e.detectBrowser(t);if(t.RTCPeerConnection.prototype.addTrack&&i.version>=65)return c(t);var n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,i=n.apply(this);return this._reverseStreams=this._reverseStreams||{},i.map((function(i){return t._reverseStreams[i.id]}))};var r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.getTracks().forEach((function(t){if(n.getSenders().find((function(i){return i.track===t})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[i.id]){var e=new t.MediaStream(i.getTracks());this._streams[i.id]=e,this._reverseStreams[e.id]=i,i=e}r.apply(this,[i])};var o=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[t.id]||t]),delete this._reverseStreams[this._streams[t.id]?this._streams[t.id].id:t.id],delete this._streams[t.id]},t.RTCPeerConnection.prototype.addTrack=function(i,n){var e=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((function(t){return t===i})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(t){return t.track===i})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(i),Promise.resolve().then((function(){e.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new t.MediaStream([i]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(t){return t.track===i}))},["createOffer","createAnswer"].forEach((function(i){var n=t.RTCPeerConnection.prototype[i],e=s({},i,(function(){var t=this,i=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var e=u(t,n);i[0].apply(null,[e])},function(t){i[1]&&i[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((function(i){return u(t,i)}))}));t.RTCPeerConnection.prototype[i]=e[i]}));var a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(t=this,n=(i=arguments[0]).sdp,Object.keys(t._reverseStreams||[]).forEach((function(i){var e=t._reverseStreams[i],r=t._streams[e.id];n=n.replace(new RegExp(e.id,"g"),r.id)})),new RTCSessionDescription({type:i.type,sdp:n})),a.apply(this,arguments)):a.apply(this,arguments);var t,i,n};var l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get:function(){var t=l.get.apply(this);return""===t.type?t:u(this,t)}}),t.RTCPeerConnection.prototype.removeTrack=function(t){var i,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(t._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(e){n._streams[e].getTracks().find((function(i){return t.track===i}))&&(i=n._streams[e])})),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}}function u(t,i){var n=i.sdp;return Object.keys(t._reverseStreams||[]).forEach((function(i){var e=t._reverseStreams[i];n=n.replace(new RegExp(t._streams[e.id].id,"g"),e.id)})),new RTCSessionDescription({type:i.type,sdp:n})}},n.shimPeerConnection=function(t){var i=e.detectBrowser(t);if(!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection){i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(i){var n=t.RTCPeerConnection.prototype[i],e=s({},i,(function(){return arguments[0]=new("addIceCandidate"===i?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));t.RTCPeerConnection.prototype[i]=e[i]}));var n=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?i.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},n.fixNegotiationNeeded=function(t){e.wrapPeerConnectionEvent(t,"negotiationneeded",(function(t){if("stable"===t.target.signalingState)return t}))},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}});var e=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(t("../utils.js")),r=t("./getusermedia"),o=t("./getdisplaymedia");function s(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(i){return t._shimmedLocalStreams[i][0]}))};var i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,n){if(!n)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var e=i.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(e)&&this._shimmedLocalStreams[n.id].push(e):this._shimmedLocalStreams[n.id]=[n,e],e};var n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){var i=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},t.getTracks().forEach((function(t){if(i.getSenders().find((function(i){return i.track===t})))throw new DOMException("Track already exists.","InvalidAccessError")}));var e=this.getSenders();n.apply(this,arguments);var r=this.getSenders().filter((function(t){return-1===e.indexOf(t)}));this._shimmedLocalStreams[t.id]=[t].concat(r)};var e=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[t.id],e.apply(this,arguments)};var r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){var i=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},t&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var e=i._shimmedLocalStreams[n].indexOf(t);-1!==e&&i._shimmedLocalStreams[n].splice(e,1),1===i._shimmedLocalStreams[n].length&&delete i._shimmedLocalStreams[n]})),r.apply(this,arguments)}}},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],NZ1C:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=function(t){var i=!1;return(t=JSON.parse(JSON.stringify(t))).filter((function(t){if(t&&(t.urls||t.url)){var n=t.urls||t.url;t.url&&!t.urls&&e.deprecated("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof n;return r&&(n=[n]),n=n.filter((function(t){if(0===t.indexOf("stun:"))return!1;var n=t.startsWith("turn")&&!t.startsWith("turn:[")&&t.includes("transport=udp");return n&&!i?(i=!0,!0):n&&!i})),delete t.url,t.urls=r?n[0]:n,!!n.length}}))};var e=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(t("../utils"))},{"../utils":"iSxC"}],YHvh:[function(t,i){var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(t){return t.trim().split("\n").map((function(t){return t.trim()}))},n.splitSections=function(t){return t.split("\nm=").map((function(t,i){return(i>0?"m="+t:t).trim()+"\r\n"}))},n.getDescription=function(t){var i=n.splitSections(t);return i&&i[0]},n.getMediaSections=function(t){var i=n.splitSections(t);return i.shift(),i},n.matchPrefix=function(t,i){return n.splitLines(t).filter((function(t){return 0===t.indexOf(i)}))},n.parseCandidate=function(t){for(var i,n={foundation:(i=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" "))[0],component:parseInt(i[1],10),protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]},e=8;e<i.length;e+=2)switch(i[e]){case"raddr":n.relatedAddress=i[e+1];break;case"rport":n.relatedPort=parseInt(i[e+1],10);break;case"tcptype":n.tcpType=i[e+1];break;case"ufrag":n.ufrag=i[e+1],n.usernameFragment=i[e+1];break;default:n[i[e]]=i[e+1]}return n},n.writeCandidate=function(t){var i=[];i.push(t.foundation),i.push(t.component),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);var n=t.type;return i.push("typ"),i.push(n),"host"!==n&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},n.parseIceOptions=function(t){return t.substr(14).split(" ")},n.parseRtpMap=function(t){var i=t.substr(9).split(" "),n={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),n.name=i[0],n.clockRate=parseInt(i[1],10),n.channels=3===i.length?parseInt(i[2],10):1,n.numChannels=n.channels,n},n.writeRtpMap=function(t){var i=t.payloadType;void 0!==t.preferredPayloadType&&(i=t.preferredPayloadType);var n=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(1!==n?"/"+n:"")+"\r\n"},n.parseExtmap=function(t){var i=t.substr(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1]}},n.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},n.parseFmtp=function(t){for(var i,n={},e=t.substr(t.indexOf(" ")+1).split(";"),r=0;r<e.length;r++)n[(i=e[r].trim().split("="))[0].trim()]=i[1];return n},n.writeFmtp=function(t){var i="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var e=[];Object.keys(t.parameters).forEach((function(i){e.push(t.parameters[i]?i+"="+t.parameters[i]:i)})),i+="a=fmtp:"+n+" "+e.join(";")+"\r\n"}return i},n.parseRtcpFb=function(t){var i=t.substr(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},n.writeRtcpFb=function(t){var i="",n=t.payloadType;return void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach((function(t){i+="a=rtcp-fb:"+n+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"})),i},n.parseSsrcMedia=function(t){var i=t.indexOf(" "),n={ssrc:parseInt(t.substr(7,i-7),10)},e=t.indexOf(":",i);return e>-1?(n.attribute=t.substr(i+1,e-i-1),n.value=t.substr(e+1)):n.attribute=t.substr(i+1),n},n.parseSsrcGroup=function(t){var i=t.substr(13).split(" ");return{semantics:i.shift(),ssrcs:i.map((function(t){return parseInt(t,10)}))}},n.getMid=function(t){var i=n.matchPrefix(t,"a=mid:")[0];if(i)return i.substr(6)},n.parseFingerprint=function(t){var i=t.substr(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1]}},n.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:n.matchPrefix(t+i,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(t,i){var n="a=setup:"+i+"\r\n";return t.fingerprints.forEach((function(t){n+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"})),n},n.getIceParameters=function(t,i){var e=n.splitLines(t);return{usernameFragment:(e=e.concat(n.splitLines(i))).filter((function(t){return 0===t.indexOf("a=ice-ufrag:")}))[0].substr(12),password:e.filter((function(t){return 0===t.indexOf("a=ice-pwd:")}))[0].substr(10)}},n.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n"},n.parseRtpParameters=function(t){for(var i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},e=n.splitLines(t)[0].split(" "),r=3;r<e.length;r++){var o=e[r],s=n.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(s){var a=n.parseRtpMap(s),c=n.matchPrefix(t,"a=fmtp:"+o+" ");switch(a.parameters=c.length?n.parseFmtp(c[0]):{},a.rtcpFeedback=n.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),i.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(a.name.toUpperCase())}}}return n.matchPrefix(t,"a=extmap:").forEach((function(t){i.headerExtensions.push(n.parseExtmap(t))})),i},n.writeRtpDescription=function(t,i){var e="";e+="m="+t+" ",e+=i.codecs.length>0?"9":"0",e+=" UDP/TLS/RTP/SAVPF ",e+=i.codecs.map((function(t){return void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType})).join(" ")+"\r\n",e+="c=IN IP4 0.0.0.0\r\n",e+="a=rtcp:9 IN IP4 0.0.0.0\r\n",i.codecs.forEach((function(t){e+=n.writeRtpMap(t),e+=n.writeFmtp(t),e+=n.writeRtcpFb(t)}));var r=0;return i.codecs.forEach((function(t){t.maxptime>r&&(r=t.maxptime)})),r>0&&(e+="a=maxptime:"+r+"\r\n"),e+="a=rtcp-mux\r\n",i.headerExtensions&&i.headerExtensions.forEach((function(t){e+=n.writeExtmap(t)})),e},n.parseRtpEncodingParameters=function(t){var i,e=[],r=n.parseRtpParameters(t),o=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=n.matchPrefix(t,"a=ssrc:").map((function(t){return n.parseSsrcMedia(t)})).filter((function(t){return"cname"===t.attribute})),c=a.length>0&&a[0].ssrc,l=n.matchPrefix(t,"a=ssrc-group:FID").map((function(t){return t.substr(17).split(" ").map((function(t){return parseInt(t,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(i=l[0][1]),r.codecs.forEach((function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(t.parameters.apt,10)};c&&i&&(n.rtx={ssrc:i}),e.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},e.push(n))}})),0===e.length&&c&&e.push({ssrc:c});var u=n.matchPrefix(t,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,e.forEach((function(t){t.maxBitrate=u}))),e},n.parseRtcpParameters=function(t){var i={},e=n.matchPrefix(t,"a=ssrc:").map((function(t){return n.parseSsrcMedia(t)})).filter((function(t){return"cname"===t.attribute}))[0];e&&(i.cname=e.value,i.ssrc=e.ssrc);var r=n.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=r.length>0,i.compound=0===r.length;var o=n.matchPrefix(t,"a=rtcp-mux");return i.mux=o.length>0,i},n.parseMsid=function(t){var i,e=n.matchPrefix(t,"a=msid:");if(1===e.length)return{stream:(i=e[0].substr(7).split(" "))[0],track:i[1]};var r=n.matchPrefix(t,"a=ssrc:").map((function(t){return n.parseSsrcMedia(t)})).filter((function(t){return"msid"===t.attribute}));return r.length>0?{stream:(i=r[0].value.split(" "))[0],track:i[1]}:void 0},n.parseSctpDescription=function(t){var i,e=n.parseMLine(t),r=n.matchPrefix(t,"a=max-message-size:");r.length>0&&(i=parseInt(r[0].substr(19),10)),isNaN(i)&&(i=65536);var o=n.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:e.fmt,maxMessageSize:i};if(n.matchPrefix(t,"a=sctpmap:").length>0){var s=n.matchPrefix(t,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:i}}},n.writeSctpDescription=function(t,i){var n=[];return n="DTLS/SCTP"!==t.protocol?["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+i.port+"\r\n"]:["m="+t.kind+" 9 "+t.protocol+" "+i.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+i.port+" "+i.protocol+" 65535\r\n"],void 0!==i.maxMessageSize&&n.push("a=max-message-size:"+i.maxMessageSize+"\r\n"),n.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(t,i,e){var r=void 0!==i?i:2;return"v=0\r\no="+(e||"thisisadapterortc")+" "+(t||n.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(t,i,e,r){var o=n.writeRtpDescription(t.kind,i);if(o+=n.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===e?"actpass":"active"),o+="a=mid:"+t.mid+"\r\n",o+=t.direction?"a="+t.direction+"\r\n":t.rtpSender&&t.rtpReceiver?"a=sendrecv\r\n":t.rtpSender?"a=sendonly\r\n":t.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",t.rtpSender){var s="msid:"+r.id+" "+t.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+s,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(t,i){for(var e=n.splitLines(t),r=0;r<e.length;r++)switch(e[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return e[r].substr(2)}return i?n.getDirection(i):"sendrecv"},n.getKind=function(t){return n.splitLines(t)[0].split(" ")[0].substr(2)},n.isRejected=function(t){return"0"===t.split(" ",2)[1]},n.parseMLine=function(t){var i=n.splitLines(t)[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},n.parseOLine=function(t){var i=n.matchPrefix(t,"o=")[0].substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},n.isValidSDP=function(t){if("string"!=typeof t||0===t.length)return!1;for(var i=n.splitLines(t),e=0;e<i.length;e++)if(i[e].length<2||"="!==i[e].charAt(1))return!1;return!0},"object"==typeof i&&(i.exports=n)},{}],NJ2u:[function(t,i){var n=t("sdp");function e(t,i,e,r,o){var s=n.writeRtpDescription(t.kind,i);if(s+=n.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=n.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===e?"actpass":o||"active"),s+="a=mid:"+t.mid+"\r\n",s+=t.rtpSender&&t.rtpReceiver?"a=sendrecv\r\n":t.rtpSender?"a=sendonly\r\n":t.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",t.rtpSender){var a=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=a;var c="msid:"+(r?r.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),s}function r(t,i){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},e=function(t,i){t=parseInt(t,10);for(var n=0;n<i.length;n++)if(i[n].payloadType===t||i[n].preferredPayloadType===t)return i[n]},r=function(t,i,n,r){var o=e(t.parameters.apt,n),s=e(i.parameters.apt,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return t.codecs.forEach((function(e){for(var o=0;o<i.codecs.length;o++){var s=i.codecs[o];if(e.name.toLowerCase()===s.name.toLowerCase()&&e.clockRate===s.clockRate){if("rtx"===e.name.toLowerCase()&&e.parameters&&s.parameters.apt&&!r(e,s,t.codecs,i.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(e.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(t){for(var i=0;i<e.rtcpFeedback.length;i++)if(e.rtcpFeedback[i].type===t.type&&e.rtcpFeedback[i].parameter===t.parameter)return!0;return!1}));break}}})),t.headerExtensions.forEach((function(t){for(var e=0;e<i.headerExtensions.length;e++){var r=i.headerExtensions[e];if(t.uri===r.uri){n.headerExtensions.push(r);break}}})),n}function o(t,i,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[i][t].indexOf(n)}function s(t,i){var n=t.getRemoteCandidates().find((function(t){return i.foundation===t.foundation&&i.ip===t.ip&&i.port===t.port&&i.priority===t.priority&&i.protocol===t.protocol&&i.type===t.type}));return n||t.addRemoteCandidate(i),!n}function a(t,i){var n=new Error(i);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}i.exports=function(t,i){function c(i,n){n.addTrack(i),n.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:i}))}function l(i,n,e,r){var o=new Event("track");o.track=n,o.receiver=e,o.transceiver={receiver:e},o.streams=r,t.setTimeout((function(){i._dispatchEvent("track",o)}))}var u=function(e){var r=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(t){r[t]=o[t].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",e=JSON.parse(JSON.stringify(e||{})),this.usingBundle="max-bundle"===e.bundlePolicy,"negotiate"===e.rtcpMuxPolicy)throw a("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(e.rtcpMuxPolicy||(e.rtcpMuxPolicy="require"),e.iceTransportPolicy){case"all":case"relay":break;default:e.iceTransportPolicy="all"}switch(e.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:e.bundlePolicy="balanced"}if(e.iceServers=function(t,i){var n=!1;return(t=JSON.parse(JSON.stringify(t))).filter((function(t){if(t&&(t.urls||t.url)){var e=t.urls||t.url;t.url&&!t.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof e;return r&&(e=[e]),e=e.filter((function(t){return 0!==t.indexOf("turn:")||-1===t.indexOf("transport=udp")||-1!==t.indexOf("turn:[")||n?0===t.indexOf("stun:")&&i>=14393&&-1===t.indexOf("?transport=udp"):(n=!0,!0)})),delete t.url,t.urls=r?e[0]:e,!!e.length}}))}(e.iceServers||[],i),this._iceGatherers=[],e.iceCandidatePoolSize)for(var s=e.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:e.iceServers,gatherPolicy:e.iceTransportPolicy}));else e.iceCandidatePoolSize=0;this._config=e,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(u.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(u.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(t,i){this._isClosed||(this.dispatchEvent(i),"function"==typeof this["on"+t]&&this["on"+t](i))},u.prototype._emitGatheringStateChange=function(){var t=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",t)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(t,i){var n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:t,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var e=this._createIceAndDtlsTransports();n.iceTransport=e.iceTransport,n.dtlsTransport=e.dtlsTransport}return i||this.transceivers.push(n),n},u.prototype.addTrack=function(i,n){if(this._isClosed)throw a("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var e;if(this.transceivers.find((function(t){return t.track===i})))throw a("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==i.kind||(e=this.transceivers[r]);return e||(e=this._createTransceiver(i.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),e.track=i,e.stream=n,e.rtpSender=new t.RTCRtpSender(i,e.dtlsTransport),e.rtpSender},u.prototype.addStream=function(t){var n=this;if(i>=15025)t.getTracks().forEach((function(i){n.addTrack(i,t)}));else{var e=t.clone();t.getTracks().forEach((function(t,i){var n=e.getTracks()[i];t.addEventListener("enabled",(function(t){n.enabled=t.enabled}))})),e.getTracks().forEach((function(t){n.addTrack(t,e)}))}},u.prototype.removeTrack=function(i){if(this._isClosed)throw a("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(i instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(t){return t.rtpSender===i}));if(!n)throw a("InvalidAccessError","Sender was not created by this connection.");var e=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(t){return t.stream})).indexOf(e)&&this.localStreams.indexOf(e)>-1&&this.localStreams.splice(this.localStreams.indexOf(e),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(t){var i=this;t.getTracks().forEach((function(t){var n=i.getSenders().find((function(i){return i.track===t}));n&&i.removeTrack(n)}))},u.prototype.getSenders=function(){return this.transceivers.filter((function(t){return!!t.rtpSender})).map((function(t){return t.rtpSender}))},u.prototype.getReceivers=function(){return this.transceivers.filter((function(t){return!!t.rtpReceiver})).map((function(t){return t.rtpReceiver}))},u.prototype._createIceGatherer=function(i,n){var e=this;if(n&&i>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[i].bufferedCandidateEvents=[],this.transceivers[i].bufferCandidates=function(t){var n=!t.candidate||0===Object.keys(t.candidate).length;r.state=n?"completed":"gathering",null!==e.transceivers[i].bufferedCandidateEvents&&e.transceivers[i].bufferedCandidateEvents.push(t)},r.addEventListener("localcandidate",this.transceivers[i].bufferCandidates),r},u.prototype._gather=function(i,e){var r=this,o=this.transceivers[e].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[e].bufferedCandidateEvents;this.transceivers[e].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[e].bufferCandidates),o.onlocalcandidate=function(t){if(!(r.usingBundle&&e>0)){var s=new Event("icecandidate");s.candidate={sdpMid:i,sdpMLineIndex:e};var a=t.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var l=n.writeCandidate(a);s.candidate=Object.assign(s.candidate,n.parseCandidate(l)),s.candidate.candidate=l,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var u=n.getMediaSections(r._localDescription.sdp);u[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",r._localDescription.sdp=n.getDescription(r._localDescription.sdp)+u.join("");var h=r.transceivers.every((function(t){return t.iceGatherer&&"completed"===t.iceGatherer.state}));"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),c||r._dispatchEvent("icecandidate",s),h&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},t.setTimeout((function(){s.forEach((function(t){o.onlocalcandidate(t)}))}),0)}},u.prototype._createIceAndDtlsTransports=function(){var i=this,n=new t.RTCIceTransport(null);n.onicestatechange=function(){i._updateIceConnectionState(),i._updateConnectionState()};var e=new t.RTCDtlsTransport(n);return e.ondtlsstatechange=function(){i._updateConnectionState()},e.onerror=function(){Object.defineProperty(e,"state",{value:"failed",writable:!0}),i._updateConnectionState()},{iceTransport:n,dtlsTransport:e}},u.prototype._disposeIceAndDtlsTransports=function(t){var i=this.transceivers[t].iceGatherer;i&&(delete i.onlocalcandidate,delete this.transceivers[t].iceGatherer);var n=this.transceivers[t].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[t].iceTransport);var e=this.transceivers[t].dtlsTransport;e&&(delete e.ondtlsstatechange,delete e.onerror,delete this.transceivers[t].dtlsTransport)},u.prototype._transceive=function(t,e,o){var s=r(t.localCapabilities,t.remoteCapabilities);e&&t.rtpSender&&(s.encodings=t.sendEncodingParameters,s.rtcp={cname:n.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(s.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(s)),o&&t.rtpReceiver&&s.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&i<15019&&t.recvEncodingParameters.forEach((function(t){delete t.rtx})),s.encodings=t.recvEncodingParameters.length?t.recvEncodingParameters:[{}],s.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(s.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(s.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(s))},u.prototype.setLocalDescription=function(t){var i,e,s=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(a("TypeError",'Unsupported type "'+t.type+'"'));if(!o("setLocalDescription",t.type,s.signalingState)||s._isClosed)return Promise.reject(a("InvalidStateError","Can not set local "+t.type+" in state "+s.signalingState));if("offer"===t.type)i=n.splitSections(t.sdp),e=i.shift(),i.forEach((function(t,i){var e=n.parseRtpParameters(t);s.transceivers[i].localCapabilities=e})),s.transceivers.forEach((function(t,i){s._gather(t.mid,i)}));else if("answer"===t.type){i=n.splitSections(s._remoteDescription.sdp),e=i.shift();var c=n.matchPrefix(e,"a=ice-lite").length>0;i.forEach((function(t,i){var o=s.transceivers[i],a=o.iceGatherer,l=o.iceTransport,u=o.dtlsTransport,h=o.localCapabilities,d=o.remoteCapabilities;if(!(n.isRejected(t)&&0===n.matchPrefix(t,"a=bundle-only").length||o.rejected)){var f=n.getIceParameters(t,e),p=n.getDtlsParameters(t,e);c&&(p.role="server"),s.usingBundle&&0!==i||(s._gather(o.mid,i),"new"===l.state&&l.start(a,f,c?"controlling":"controlled"),"new"===u.state&&u.start(p));var m=r(h,d);s._transceive(o,m.codecs.length>0,!1)}}))}return s._localDescription={type:t.type,sdp:t.sdp},s._updateSignalingState("offer"===t.type?"have-local-offer":"stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(e){var u=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(a("TypeError",'Unsupported type "'+e.type+'"'));if(!o("setRemoteDescription",e.type,u.signalingState)||u._isClosed)return Promise.reject(a("InvalidStateError","Can not set remote "+e.type+" in state "+u.signalingState));var h={};u.remoteStreams.forEach((function(t){h[t.id]=t}));var d=[],f=n.splitSections(e.sdp),p=f.shift(),m=n.matchPrefix(p,"a=ice-lite").length>0,v=n.matchPrefix(p,"a=group:BUNDLE ").length>0;u.usingBundle=v;var b=n.matchPrefix(p,"a=ice-options:")[0];return u.canTrickleIceCandidates=!!b&&b.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(o,a){var l=n.splitLines(o),f=n.getKind(o),b=n.isRejected(o)&&0===n.matchPrefix(o,"a=bundle-only").length,g=l[0].substr(2).split(" ")[2],w=n.getDirection(o,p),y=n.parseMsid(o),x=n.getMid(o)||n.generateIdentifier();if(b||"application"===f&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))u.transceivers[a]={mid:x,kind:f,protocol:g,rejected:!0};else{var k,j,O,S,E,C,I,M,T;!b&&u.transceivers[a]&&u.transceivers[a].rejected&&(u.transceivers[a]=u._createTransceiver(f,!0));var P,_,D=n.parseRtpParameters(o);b||(P=n.getIceParameters(o,p),(_=n.getDtlsParameters(o,p)).role="client"),I=n.parseRtpEncodingParameters(o);var A=n.parseRtcpParameters(o),R=n.matchPrefix(o,"a=end-of-candidates",p).length>0,z=n.matchPrefix(o,"a=candidate:").map((function(t){return n.parseCandidate(t)})).filter((function(t){return 1===t.component}));if(("offer"===e.type||"answer"===e.type)&&!b&&v&&a>0&&u.transceivers[a]&&(u._disposeIceAndDtlsTransports(a),u.transceivers[a].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[a].iceTransport=u.transceivers[0].iceTransport,u.transceivers[a].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[a].rtpSender&&u.transceivers[a].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[a].rtpReceiver&&u.transceivers[a].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),"offer"!==e.type||b)"answer"!==e.type||b||(j=(k=u.transceivers[a]).iceGatherer,O=k.iceTransport,S=k.dtlsTransport,E=k.rtpReceiver,C=k.sendEncodingParameters,M=k.localCapabilities,u.transceivers[a].recvEncodingParameters=I,u.transceivers[a].remoteCapabilities=D,u.transceivers[a].rtcpParameters=A,z.length&&"new"===O.state&&(!m&&!R||v&&0!==a?z.forEach((function(t){s(k.iceTransport,t)})):O.setRemoteCandidates(z)),v&&0!==a||("new"===O.state&&O.start(j,P,"controlling"),"new"===S.state&&S.start(_)),!r(k.localCapabilities,k.remoteCapabilities).codecs.filter((function(t){return"rtx"===t.name.toLowerCase()})).length&&k.sendEncodingParameters[0].rtx&&delete k.sendEncodingParameters[0].rtx,u._transceive(k,"sendrecv"===w||"recvonly"===w,"sendrecv"===w||"sendonly"===w),!E||"sendrecv"!==w&&"sendonly"!==w?delete k.rtpReceiver:(T=E.track,y?(h[y.stream]||(h[y.stream]=new t.MediaStream),c(T,h[y.stream]),d.push([T,E,h[y.stream]])):(h.default||(h.default=new t.MediaStream),c(T,h.default),d.push([T,E,h.default]))));else{(k=u.transceivers[a]||u._createTransceiver(f)).mid=x,k.iceGatherer||(k.iceGatherer=u._createIceGatherer(a,v)),z.length&&"new"===k.iceTransport.state&&(!R||v&&0!==a?z.forEach((function(t){s(k.iceTransport,t)})):k.iceTransport.setRemoteCandidates(z)),M=t.RTCRtpReceiver.getCapabilities(f),i<15019&&(M.codecs=M.codecs.filter((function(t){return"rtx"!==t.name}))),C=k.sendEncodingParameters||[{ssrc:1001*(2*a+2)}];var N,L=!1;"sendrecv"===w||"sendonly"===w?(L=!k.rtpReceiver,E=k.rtpReceiver||new t.RTCRtpReceiver(k.dtlsTransport,f),L&&(T=E.track,y&&"-"===y.stream||(y?(h[y.stream]||(h[y.stream]=new t.MediaStream,Object.defineProperty(h[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(T,"id",{get:function(){return y.track}}),N=h[y.stream]):(h.default||(h.default=new t.MediaStream),N=h.default)),N&&(c(T,N),k.associatedRemoteMediaStreams.push(N)),d.push([T,E,N]))):k.rtpReceiver&&k.rtpReceiver.track&&(k.associatedRemoteMediaStreams.forEach((function(i){var n,e,r=i.getTracks().find((function(t){return t.id===k.rtpReceiver.track.id}));r&&((e=i).removeTrack(n=r),e.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:n})))})),k.associatedRemoteMediaStreams=[]),k.localCapabilities=M,k.remoteCapabilities=D,k.rtpReceiver=E,k.rtcpParameters=A,k.sendEncodingParameters=C,k.recvEncodingParameters=I,u._transceive(u.transceivers[a],!1,L)}}})),void 0===u._dtlsRole&&(u._dtlsRole="offer"===e.type?"active":"passive"),u._remoteDescription={type:e.type,sdp:e.sdp},u._updateSignalingState("offer"===e.type?"have-remote-offer":"stable"),Object.keys(h).forEach((function(i){var n=h[i];if(n.getTracks().length){if(-1===u.remoteStreams.indexOf(n)){u.remoteStreams.push(n);var e=new Event("addstream");e.stream=n,t.setTimeout((function(){u._dispatchEvent("addstream",e)}))}d.forEach((function(t){n.id===t[2].id&&l(u,t[0],t[1],[n])}))}})),d.forEach((function(t){t[2]||l(u,t[0],t[1],[])})),t.setTimeout((function(){u&&u.transceivers&&u.transceivers.forEach((function(t){t.iceTransport&&"new"===t.iceTransport.state&&t.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),t.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach((function(t){t.iceTransport&&t.iceTransport.stop(),t.dtlsTransport&&t.dtlsTransport.stop(),t.rtpSender&&t.rtpSender.stop(),t.rtpReceiver&&t.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(t){this.signalingState=t;var i=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",i)},u.prototype._maybeFireNegotiationNeeded=function(){var i=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,t.setTimeout((function(){if(i.needNegotiation){i.needNegotiation=!1;var t=new Event("negotiationneeded");i._dispatchEvent("negotiationneeded",t)}}),0))},u.prototype._updateIceConnectionState=function(){var t,i={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(t){t.iceTransport&&!t.rejected&&i[t.iceTransport.state]++})),t="new",i.failed>0?t="failed":i.checking>0?t="checking":i.disconnected>0?t="disconnected":i.new>0?t="new":i.connected>0?t="connected":i.completed>0&&(t="completed"),t!==this.iceConnectionState){this.iceConnectionState=t;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},u.prototype._updateConnectionState=function(){var t,i={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(t){t.iceTransport&&t.dtlsTransport&&!t.rejected&&(i[t.iceTransport.state]++,i[t.dtlsTransport.state]++)})),i.connected+=i.completed,t="new",i.failed>0?t="failed":i.connecting>0?t="connecting":i.disconnected>0?t="disconnected":i.new>0?t="new":i.connected>0&&(t="connected"),t!==this.connectionState){this.connectionState=t;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},u.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(a("InvalidStateError","Can not call createOffer after close"));var o=r.transceivers.filter((function(t){return"audio"===t.kind})).length,s=r.transceivers.filter((function(t){return"video"===t.kind})).length,c=arguments[0];if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==c.offerToReceiveAudio&&(o=!0===c.offerToReceiveAudio?1:!1===c.offerToReceiveAudio?0:c.offerToReceiveAudio),void 0!==c.offerToReceiveVideo&&(s=!0===c.offerToReceiveVideo?1:!1===c.offerToReceiveVideo?0:c.offerToReceiveVideo)}for(r.transceivers.forEach((function(t){"audio"===t.kind?--o<0&&(t.wantReceive=!1):"video"===t.kind&&--s<0&&(t.wantReceive=!1)}));o>0||s>0;)o>0&&(r._createTransceiver("audio"),o--),s>0&&(r._createTransceiver("video"),s--);var l=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(e,o){var s=e.track,a=e.kind,c=e.mid||n.generateIdentifier();e.mid=c,e.iceGatherer||(e.iceGatherer=r._createIceGatherer(o,r.usingBundle));var l=t.RTCRtpSender.getCapabilities(a);i<15019&&(l.codecs=l.codecs.filter((function(t){return"rtx"!==t.name}))),l.codecs.forEach((function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),e.remoteCapabilities&&e.remoteCapabilities.codecs&&e.remoteCapabilities.codecs.forEach((function(i){t.name.toLowerCase()===i.name.toLowerCase()&&t.clockRate===i.clockRate&&(t.preferredPayloadType=i.payloadType)}))})),l.headerExtensions.forEach((function(t){(e.remoteCapabilities&&e.remoteCapabilities.headerExtensions||[]).forEach((function(i){t.uri===i.uri&&(t.id=i.id)}))}));var u=e.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&i>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),e.wantReceive&&(e.rtpReceiver=new t.RTCRtpReceiver(e.dtlsTransport,a)),e.localCapabilities=l,e.sendEncodingParameters=u})),"max-compat"!==r._config.bundlePolicy&&(l+="a=group:BUNDLE "+r.transceivers.map((function(t){return t.mid})).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(t,i){l+=e(t,t.localCapabilities,"offer",t.stream,r._dtlsRole),l+="a=rtcp-rsize\r\n",!t.iceGatherer||"new"===r.iceGatheringState||0!==i&&r.usingBundle||(t.iceGatherer.getLocalCandidates().forEach((function(t){t.component=1,l+="a="+n.writeCandidate(t)+"\r\n"})),"completed"===t.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))}));var u=new t.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(u)},u.prototype.createAnswer=function(){var o=this;if(o._isClosed)return Promise.reject(a("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==o.signalingState&&"have-local-pranswer"!==o.signalingState)return Promise.reject(a("InvalidStateError","Can not call createAnswer in signalingState "+o.signalingState));var s=n.writeSessionBoilerplate(o._sdpSessionId,o._sdpSessionVersion++);o.usingBundle&&(s+="a=group:BUNDLE "+o.transceivers.map((function(t){return t.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var c=n.getMediaSections(o._remoteDescription.sdp).length;o.transceivers.forEach((function(t,n){if(!(n+1>c)){if(t.rejected)return"application"===t.kind?s+="DTLS/SCTP"===t.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+t.protocol+" webrtc-datachannel\r\n":"audio"===t.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===t.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+t.mid+"\r\n");var a;t.stream&&("audio"===t.kind?a=t.stream.getAudioTracks()[0]:"video"===t.kind&&(a=t.stream.getVideoTracks()[0]),a&&i>=15019&&"video"===t.kind&&!t.sendEncodingParameters[0].rtx&&(t.sendEncodingParameters[0].rtx={ssrc:t.sendEncodingParameters[0].ssrc+1}));var l=r(t.localCapabilities,t.remoteCapabilities);!l.codecs.filter((function(t){return"rtx"===t.name.toLowerCase()})).length&&t.sendEncodingParameters[0].rtx&&delete t.sendEncodingParameters[0].rtx,s+=e(t,l,"answer",t.stream,o._dtlsRole),t.rtcpParameters&&t.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var l=new t.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(l)},u.prototype.addIceCandidate=function(t){var i,e=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,o){if(!e._remoteDescription)return o(a("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var c=t.sdpMLineIndex;if(t.sdpMid)for(var l=0;l<e.transceivers.length;l++)if(e.transceivers[l].mid===t.sdpMid){c=l;break}var u=e.transceivers[c];if(!u)return o(a("OperationError","Can not add ICE candidate"));if(u.rejected)return r();var h=Object.keys(t.candidate).length>0?n.parseCandidate(t.candidate):{};if("tcp"===h.protocol&&(0===h.port||9===h.port))return r();if(h.component&&1!==h.component)return r();if((0===c||c>0&&u.iceTransport!==e.transceivers[0].iceTransport)&&!s(u.iceTransport,h))return o(a("OperationError","Can not add ICE candidate"));var d=t.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(i=n.getMediaSections(e._remoteDescription.sdp))[c]+="a="+(h.type?d:"end-of-candidates")+"\r\n",e._remoteDescription.sdp=n.getDescription(e._remoteDescription.sdp)+i.join("")}else for(var f=0;f<e.transceivers.length&&(e.transceivers[f].rejected||(e.transceivers[f].iceTransport.addRemoteCandidate({}),(i=n.getMediaSections(e._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",e._remoteDescription.sdp=n.getDescription(e._remoteDescription.sdp)+i.join(""),!e.usingBundle));f++);r()}))},u.prototype.getStats=function(i){if(i&&i instanceof t.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(t){t.rtpSender&&t.rtpSender.track===i?n=t.rtpSender:t.rtpReceiver&&t.rtpReceiver.track===i&&(n=t.rtpReceiver)})),!n)throw a("InvalidAccessError","Invalid selector.");return n.getStats()}var e=[];return this.transceivers.forEach((function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(i){t[i]&&e.push(t[i].getStats())}))})),Promise.all(e).then((function(t){var i=new Map;return t.forEach((function(t){t.forEach((function(t){i.set(t.id,t)}))})),i}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(i){var n=t[i];if(n&&n.prototype&&n.prototype.getStats){var e=n.prototype.getStats;n.prototype.getStats=function(){return e.apply(this).then((function(t){var i=new Map;return Object.keys(t).forEach((function(n){t[n].type=function(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}(t[n]),i.set(n,t[n])})),i}))}}}));var h=["createOffer","createAnswer"];return h.forEach((function(t){var i=u.prototype[t];u.prototype[t]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?i.apply(this,[arguments[2]]).then((function(i){"function"==typeof t[0]&&t[0].apply(null,[i])}),(function(i){"function"==typeof t[1]&&t[1].apply(null,[i])})):i.apply(this,arguments)}})),(h=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(t){var i=u.prototype[t];u.prototype[t]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?i.apply(this,arguments).then((function(){"function"==typeof t[1]&&t[1].apply(null)}),(function(i){"function"==typeof t[2]&&t[2].apply(null,[i])})):i.apply(this,arguments)}})),["getStats"].forEach((function(t){var i=u.prototype[t];u.prototype[t]=function(){var t=arguments;return"function"==typeof t[1]?i.apply(this,arguments).then((function(){"function"==typeof t[1]&&t[1].apply(null)})):i.apply(this,arguments)}})),u}},{sdp:"YHvh"}],YdKx:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(t){var i=t&&t.navigator,n=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(t){return n(t).catch((function(t){return Promise.reject(function(t){return{name:{PermissionDeniedError:"NotAllowedError"}[t.name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}}}(t))}))}}},{}],P3bV:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}},{}],XRic:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimPeerConnection=function(t){var i=e.detectBrowser(t);if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(t){return t}),t.RTCSessionDescription||(t.RTCSessionDescription=function(t){return t}),i.version<15025)){var n=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set:function(t){n.set.call(this,t);var i=new Event("enabled");i.enabled=t,this.dispatchEvent(i)}})}!t.RTCRtpSender||"dtmf"in t.RTCRtpSender.prototype||Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new t.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);var s=(0,o.default)(t,i.version);t.RTCPeerConnection=function(t){return t&&t.iceServers&&(t.iceServers=(0,r.filterIceServers)(t.iceServers,i.version),e.log("ICE servers after filtering:",t.iceServers)),new s(t)},t.RTCPeerConnection.prototype=s.prototype},n.shimReplaceTrack=function(t){!t.RTCRtpSender||"replaceTrack"in t.RTCRtpSender.prototype||(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return s.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}});var e=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(t("../utils")),r=t("./filtericeservers"),o=function(t){return t&&t.__esModule?t:{default:t}}(t("rtcpeerconnection-shim")),s=t("./getusermedia"),a=t("./getdisplaymedia")},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],GzSv:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(t){var i=e.detectBrowser(t),n=t&&t.navigator,o=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,i,r){e.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(i,r)},!(i.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(t,i,n){i in t&&!(n in t)&&(t[n]=t[i],delete t[i])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(t){return"object"===r(t)&&"object"===r(t.audio)&&(t=JSON.parse(JSON.stringify(t)),s(t.audio,"autoGainControl","mozAutoGainControl"),s(t.audio,"noiseSuppression","mozNoiseSuppression")),a(t)},o&&o.prototype.getSettings){var c=o.prototype.getSettings;o.prototype.getSettings=function(){var t=c.apply(this,arguments);return s(t,"mozAutoGainControl","autoGainControl"),s(t,"mozNoiseSuppression","noiseSuppression"),t}}if(o&&o.prototype.applyConstraints){var l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(t){return"audio"===this.kind&&"object"===r(t)&&(t=JSON.parse(JSON.stringify(t)),s(t,"autoGainControl","mozAutoGainControl"),s(t,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[t])}}}};var e=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(t("../utils"));function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}},{"../utils":"iSxC"}],UuGU:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(t,i){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:i}:n.video.mediaSource=i,t.navigator.mediaDevices.getUserMedia(n)})}},{}],Fzdr:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimOnTrack=function(t){"object"===s(t)&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(t){var i=e.detectBrowser(t);if("object"===s(t)&&(t.RTCPeerConnection||t.mozRTCPeerConnection)){if(!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(i){var n=t.RTCPeerConnection.prototype[i],e=function(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}({},i,(function(){return arguments[0]=new("addIceCandidate"===i?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));t.RTCPeerConnection.prototype[i]=e[i]})),i.version<68){var n=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){var[t,n,e]=arguments;return o.apply(this,[t||null]).then((function(t){if(i.version<53&&!n)try{t.forEach((function(t){t.type=r[t.type]||t.type}))}catch(e){if("TypeError"!==e.name)throw e;t.forEach((function(i,n){t.set(n,Object.assign({},i,{type:r[i.type]||i.type}))}))}return t})).then(n,e)}}},n.shimSenderGetStats=function(t){if("object"===s(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&(!t.RTCRtpSender||!("getStats"in t.RTCRtpSender.prototype))){var i=t.RTCPeerConnection.prototype.getSenders;i&&(t.RTCPeerConnection.prototype.getSenders=function(){var t=this,n=i.apply(this,[]);return n.forEach((function(i){return i._pc=t})),n});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var t=n.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},n.shimReceiverGetStats=function(t){if("object"===s(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&(!t.RTCRtpSender||!("getStats"in t.RTCRtpReceiver.prototype))){var i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){var t=this,n=i.apply(this,[]);return n.forEach((function(i){return i._pc=t})),n}),e.wrapPeerConnectionEvent(t,"track",(function(t){return t.receiver._pc=t.srcElement,t})),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var i=this;e.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&t.getTracks().includes(n.track)&&i.removeTrack(n)}))})},n.shimRTCDataChannel=function(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)},n.shimAddTransceiver=function(t){if("object"===s(t)&&t.RTCPeerConnection){var i=t.RTCPeerConnection.prototype.addTransceiver;i&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var t=arguments[1],n=t&&"sendEncodings"in t;n&&t.sendEncodings.forEach((function(t){if("rid"in t&&!/^[a-z0-9]{0,16}$/i.test(t.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in t&&!(parseFloat(t.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in t&&!(parseFloat(t.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var e=i.apply(this,arguments);if(n){var{sender:r}=e,o=r.getParameters();"encodings"in o||(o.encodings=t.sendEncodings,this.setParametersPromises.push(r.setParameters(o).catch((function(){}))))}return e})}},n.shimCreateOffer=function(t){if("object"===s(t)&&t.RTCPeerConnection){var i=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){var t=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return i.apply(n,t)})).finally((function(){n.setParametersPromises=[]})):i.apply(this,arguments)}}},n.shimCreateAnswer=function(t){if("object"===s(t)&&t.RTCPeerConnection){var i=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){var t=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return i.apply(n,t)})).finally((function(){n.setParametersPromises=[]})):i.apply(this,arguments)}}},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}});var e=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(t("../utils")),r=t("./getusermedia"),o=t("./getdisplaymedia");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],t1lL:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimLocalStreamsAPI=function(t){if("object"===r(t)&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){var i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(t){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach((function(e){return i.call(n,e,t)})),t.getVideoTracks().forEach((function(e){return i.call(n,e,t)}))},t.RTCPeerConnection.prototype.addTrack=function(t){var n=arguments[1];return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),i.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var i=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(t);if(-1!==n){this._localStreams.splice(n,1);var e=t.getTracks();this.getSenders().forEach((function(t){e.includes(t.track)&&i.removeTrack(t)}))}})}},n.shimRemoteStreamsAPI=function(t){if("object"===r(t)&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(t){var i=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(i._remoteStreams||(i._remoteStreams=[]),!i._remoteStreams.includes(t)){i._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,i.dispatchEvent(n)}}))})}});var i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach((function(i){if(t._remoteStreams||(t._remoteStreams=[]),!(t._remoteStreams.indexOf(i)>=0)){t._remoteStreams.push(i);var n=new Event("addstream");n.stream=i,t.dispatchEvent(n)}}))}),i.apply(t,arguments)}}},n.shimCallbacksAPI=function(t){if("object"===r(t)&&t.RTCPeerConnection){var i=t.RTCPeerConnection.prototype,n=i.createOffer,e=i.createAnswer,o=i.setLocalDescription,s=i.setRemoteDescription,a=i.addIceCandidate;i.createOffer=function(t,i){var e=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r},i.createAnswer=function(t,i){var n=arguments.length>=2?arguments[2]:arguments[0],r=e.apply(this,[n]);return i?(r.then(t,i),Promise.resolve()):r};var c=function(t,i,n){var e=o.apply(this,[t]);return n?(e.then(i,n),Promise.resolve()):e};i.setLocalDescription=c,i.setRemoteDescription=c=function(t,i,n){var e=s.apply(this,[t]);return n?(e.then(i,n),Promise.resolve()):e},i.addIceCandidate=c=function(t,i,n){var e=a.apply(this,[t]);return n?(e.then(i,n),Promise.resolve()):e}}},n.shimGetUserMedia=function(t){var i=t&&t.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){var n=i.mediaDevices,e=n.getUserMedia.bind(n);i.mediaDevices.getUserMedia=function(t){return e(o(t))}}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(t,n,e){i.mediaDevices.getUserMedia(t).then(n,e)}.bind(i))},n.shimConstraints=o,n.shimRTCIceServerUrls=function(t){var i=t.RTCPeerConnection;t.RTCPeerConnection=function(t,n){if(t&&t.iceServers){for(var r=[],o=0;o<t.iceServers.length;o++){var s=t.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(e.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,r.push(s)):r.push(t.iceServers[o])}t.iceServers=r}return new i(t,n)},t.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in t.RTCPeerConnection&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return i.generateCertificate}})},n.shimTrackEventTransceiver=function(t){"object"===r(t)&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(t){var i=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(t){if(t){void 0!==t.offerToReceiveAudio&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);var n=this.getTransceivers().find((function(t){return"audio"===t.receiver.track.kind}));!1===t.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==t.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==t.offerToReceiveVideo&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);var e=this.getTransceivers().find((function(t){return"video"===t.receiver.track.kind}));!1===t.offerToReceiveVideo&&e?"sendrecv"===e.direction?e.setDirection?e.setDirection("sendonly"):e.direction="sendonly":"recvonly"===e.direction&&(e.setDirection?e.setDirection("inactive"):e.direction="inactive"):!0!==t.offerToReceiveVideo||e||this.addTransceiver("video")}return i.apply(this,arguments)}};var e=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(t("../utils"));function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return t&&void 0!==t.video?Object.assign({},t,{video:e.compactObject(t.video)}):t}},{"../utils":"iSxC"}],GOQK:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimRTCIceCandidate=function(t){if(t.RTCIceCandidate&&(!t.RTCIceCandidate||!("foundation"in t.RTCIceCandidate.prototype))){var i=t.RTCIceCandidate;t.RTCIceCandidate=function(t){if("object"===function(t){return("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(t)&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new i(t),r=e.default.parseCandidate(t.candidate),o=Object.assign(n,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new i(t)},t.RTCIceCandidate.prototype=i.prototype,r.wrapPeerConnectionEvent(t,"icecandidate",(function(i){return i.candidate&&Object.defineProperty(i,"candidate",{value:new t.RTCIceCandidate(i.candidate),writable:"false"}),i}))}},n.shimMaxMessageSize=function(t){if(t.RTCPeerConnection){var i=r.detectBrowser(t);"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===i.browser&&i.version>=76){var{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;var i=e.default.splitSections(t.sdp);return i.shift(),i.some((function(t){var i=e.default.parseMLine(t);return i&&"application"===i.kind&&-1!==i.protocol.indexOf("SCTP")}))}(arguments[0])){var r,o=function(t){var i=t.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===i||i.length<2)return-1;var n=parseInt(i[1],10);return n!=n?-1:n}(arguments[0]),s=(l=o,u=65536,"firefox"===i.browser&&(u=i.version<57?-1===l?16384:2147483637:i.version<60?57===i.version?65535:65536:2147483637),u),a=function(t,n){var r=65536;"firefox"===i.browser&&57===i.version&&(r=65535);var o=e.default.matchPrefix(t.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===i.browser&&-1!==n&&(r=2147483637),r}(arguments[0],o);r=0===s&&0===a?Number.POSITIVE_INFINITY:0===s||0===a?Math.max(s,a):Math.min(s,a);var c={};Object.defineProperty(c,"maxMessageSize",{get:function(){return r}}),this._sctp=c}var l,u;return n.apply(this,arguments)}}},n.shimSendThrowTypeError=function(t){if(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype){var i=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){var t=i.apply(this,arguments);return n(t,this),t},r.wrapPeerConnectionEvent(t,"datachannel",(function(t){return n(t.channel,t.target),t}))}function n(t,i){var n=t.send;t.send=function(){var e=arguments[0],r=e.length||e.size||e.byteLength;if("open"===t.readyState&&i.sctp&&r>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return n.apply(t,arguments)}}},n.shimConnectionState=function(t){if(t.RTCPeerConnection&&!("connectionState"in t.RTCPeerConnection.prototype)){var i=t.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(t){var n=i[t];i[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(t){var i=t.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;var n=new Event("connectionstatechange",t);i.dispatchEvent(n)}return t},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}},n.removeAllowExtmapMixed=function(t){if(t.RTCPeerConnection){var i=r.detectBrowser(t);if(!("chrome"===i.browser&&i.version>=71)){var n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(t){return t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")&&(t.sdp=t.sdp.split("\n").filter((function(t){return"a=extmap-allow-mixed"!==t.trim()})).join("\n")),n.apply(this,arguments)}}}};var e=function(t){return t&&t.__esModule?t:{default:t}}(t("sdp")),r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return t}();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}(t("./utils"))},{sdp:"YHvh","./utils":"iSxC"}],KtlG:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=function(){var{window:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=e.log,l=e.detectBrowser(t),u={browserDetails:l,commonShim:c,extractVersion:e.extractVersion,disableLog:e.disableLog,disableWarnings:e.disableWarnings};switch(l.browser){case"chrome":if(!r||!r.shimPeerConnection||!i.shimChrome)return n("Chrome shim is not included in this adapter release."),u;n("adapter.js shimming chrome."),u.browserShim=r,r.shimGetUserMedia(t),r.shimMediaStream(t),r.shimPeerConnection(t),r.shimOnTrack(t),r.shimAddTrackRemoveTrack(t),r.shimGetSendersWithDtmf(t),r.shimGetStats(t),r.shimSenderReceiverGetStats(t),r.fixNegotiationNeeded(t),c.shimRTCIceCandidate(t),c.shimConnectionState(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t),c.removeAllowExtmapMixed(t);break;case"firefox":if(!s||!s.shimPeerConnection||!i.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=s,s.shimGetUserMedia(t),s.shimPeerConnection(t),s.shimOnTrack(t),s.shimRemoveStream(t),s.shimSenderGetStats(t),s.shimReceiverGetStats(t),s.shimRTCDataChannel(t),s.shimAddTransceiver(t),s.shimCreateOffer(t),s.shimCreateAnswer(t),c.shimRTCIceCandidate(t),c.shimConnectionState(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t);break;case"edge":if(!o||!o.shimPeerConnection||!i.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=o,o.shimGetUserMedia(t),o.shimGetDisplayMedia(t),o.shimPeerConnection(t),o.shimReplaceTrack(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t);break;case"safari":if(!a||!i.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=a,a.shimRTCIceServerUrls(t),a.shimCreateOfferLegacy(t),a.shimCallbacksAPI(t),a.shimLocalStreamsAPI(t),a.shimRemoteStreamsAPI(t),a.shimTrackEventTransceiver(t),a.shimGetUserMedia(t),c.shimRTCIceCandidate(t),c.shimMaxMessageSize(t),c.shimSendThrowTypeError(t),c.removeAllowExtmapMixed(t);break;default:n("Unsupported browser!")}return u};var e=u(t("./utils")),r=u(t("./chrome/chrome_shim")),o=u(t("./edge/edge_shim")),s=u(t("./firefox/firefox_shim")),a=u(t("./safari/safari_shim")),c=u(t("./common_shim"));function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=l();if(i&&i.has(t))return i.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=e?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,i&&i.set(t,n),n}},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],tI1X:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=(0,t("./adapter_factory.js").adapterFactory)({window});n.default=e},{"./adapter_factory.js":"KtlG"}],sXtV:[function(t,i,n){var e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var r=e(t("webrtc-adapter"));n.webRTCAdapter=r.default},{"webrtc-adapter":"tI1X"}],I31f:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0});var e=t("./adapter");n.Supports=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},t.prototype.isBrowserSupported=function(){var t=this.getBrowser(),i=this.getVersion();return!!this.supportedBrowsers.includes(t)&&("chrome"===t?i>=this.minChromeVersion:"firefox"===t?i>=this.minFirefoxVersion:"safari"===t&&!this.isIOS&&i>=this.minSafariVersion)},t.prototype.getBrowser=function(){return e.webRTCAdapter.browserDetails.browser},t.prototype.getVersion=function(){return e.webRTCAdapter.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var t,i=this.getBrowser(),n=e.webRTCAdapter.browserDetails.version||0;if("chrome"===i&&n<72)return!1;if("firefox"===i&&n>=59)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r=!1;try{(t=new RTCPeerConnection).addTransceiver("audio"),r=!0}catch(o){}finally{t&&t.close()}return r},t.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},t}())},{"./adapter":"sXtV"}],BHXf:[function(t,i,n){var e=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i.default=t,i};Object.defineProperty(n,"__esModule",{value:!0});var r=e(t("peerjs-js-binarypack")),o=t("./supports"),s={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};n.util=new(function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=s,this.browser=o.Supports.getBrowser(),this.browserVersion=o.Supports.getVersion(),this.supports=function(){var t,i={browser:o.Supports.isBrowserSupported(),webRTC:o.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!i.webRTC)return i;try{t=new RTCPeerConnection(s),i.audioVideo=!0;var n=void 0;try{n=t.createDataChannel("_PEERJSTEST",{ordered:!0}),i.data=!0,i.reliable=!!n.ordered;try{n.binaryType="blob",i.binaryBlob=!o.Supports.isIOS}catch(e){}}catch(e){}finally{n&&n.close()}}catch(e){}finally{t&&t.close()}return i}(),this.pack=r.pack,this.unpack=r.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},t.prototype.chunk=function(t){for(var i=[],e=t.size,r=Math.ceil(e/n.util.chunkedMTU),o=0,s=0;s<e;){var a=Math.min(e,s+n.util.chunkedMTU),c=t.slice(s,a);i.push({__peerData:this._dataCount,n:o,data:c,total:r}),s=a,o++}return this._dataCount++,i},t.prototype.blobToArrayBuffer=function(t,i){var n=new FileReader;return n.onload=function(t){t.target&&i(t.target.result)},n.readAsArrayBuffer(t),n},t.prototype.binaryStringToArrayBuffer=function(t){for(var i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=255&t.charCodeAt(n);return i.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},t.prototype.isSecure=function(){return"https:"===location.protocol},t}())},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],JJlS:[function(t,i){var n=Object.prototype.hasOwnProperty,e="~";function r(){}function o(t,i,n){this.fn=t,this.context=i,this.once=n||!1}function s(t,i,n,r,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,r||t,s),c=e?e+i:i;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function a(t,i){0==--t._eventsCount?t._events=new r:delete t._events[i]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(e=!1)),c.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)n.call(t,i)&&r.push(e?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var i=this._events[e?e+t:t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,o=new Array(r);n<r;n++)o[n]=i[n].fn;return o},c.prototype.listenerCount=function(t){var i=this._events[e?e+t:t];return i?i.fn?1:i.length:0},c.prototype.emit=function(t,i,n,r,o,s){var a=e?e+t:t;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,i),!0;case 3:return u.fn.call(u.context,i,n),!0;case 4:return u.fn.call(u.context,i,n,r),!0;case 5:return u.fn.call(u.context,i,n,r,o),!0;case 6:return u.fn.call(u.context,i,n,r,o,s),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,i);break;case 3:u[l].fn.call(u[l].context,i,n);break;case 4:u[l].fn.call(u[l].context,i,n,r);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},c.prototype.on=function(t,i,n){return s(this,t,i,n,!1)},c.prototype.once=function(t,i,n){return s(this,t,i,n,!0)},c.prototype.removeListener=function(t,i,n,r){var o=e?e+t:t;if(!this._events[o])return this;if(!i)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==i||r&&!s.once||n&&s.context!==n||a(this,o);else{for(var c=0,l=[],u=s.length;c<u;c++)(s[c].fn!==i||r&&!s[c].once||n&&s[c].context!==n)&&l.push(s[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},c.prototype.removeAllListeners=function(t){var i;return t?this._events[i=e?e+t:t]&&a(this,i):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,void 0!==i&&(i.exports=c)},{}],WOs9:[function(t,i,n){var e=this&&this.__read||function(t,i){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,r,o=n.call(t),s=[];try{for(;(void 0===i||i-- >0)&&!(e=o.next()).done;)s.push(e.value)}catch(a){r={error:a}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},r=this&&this.__spread||function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(e(arguments[i]));return t};Object.defineProperty(n,"__esModule",{value:!0});var o,s="PeerJS: ";!function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"}(o=n.LogLevel||(n.LogLevel={}));var a=function(){function t(){this._logLevel=o.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!0,configurable:!0}),t.prototype.log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._logLevel>=o.All&&this._print.apply(this,r([o.All],t))},t.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._logLevel>=o.Warnings&&this._print.apply(this,r([o.Warnings],t))},t.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._logLevel>=o.Errors&&this._print.apply(this,r([o.Errors],t))},t.prototype.setLogFunction=function(t){this._print=t},t.prototype._print=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var e=r([s],i);for(var a in e)e[a]instanceof Error&&(e[a]="("+e[a].name+") "+e[a].message);t>=o.All?console.log.apply(console,r(e)):t>=o.Warnings?console.warn.apply(console,r(["WARNING"],e)):t>=o.Errors&&console.error.apply(console,r(["ERROR"],e))},t}();n.default=new a},{}],ZRYf:[function(t,i,n){var e;Object.defineProperty(n,"__esModule",{value:!0}),(e=n.ConnectionEventType||(n.ConnectionEventType={})).Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged",function(t){t.Data="data",t.Media="media"}(n.ConnectionType||(n.ConnectionType={})),function(t){t.Open="open",t.Close="close",t.Connection="connection",t.Call="call",t.Disconnected="disconnected",t.Error="error"}(n.PeerEventType||(n.PeerEventType={})),function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"}(n.PeerErrorType||(n.PeerErrorType={})),function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"}(n.SerializationType||(n.SerializationType={})),function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"}(n.SocketEventType||(n.SocketEventType={})),function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"}(n.ServerMessageType||(n.ServerMessageType={}))},{}],wJlv:[function(t,i,n){var e=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),r=this&&this.__read||function(t,i){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,r,o=n.call(t),s=[];try{for(;(void 0===i||i-- >0)&&!(e=o.next()).done;)s.push(e.value)}catch(u){r={error:u}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},o=this&&this.__spread||function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(r(arguments[i]));return t},s=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,n=i&&t[i],e=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("eventemitter3"),l=a(t("./logger")),u=t("./enums"),h=function(t){function i(i,n,e,r,o,s){void 0===s&&(s=5e3);var a=t.call(this)||this;return a.pingInterval=s,a._disconnected=!0,a._messagesQueue=[],a._baseUrl=(i?"wss://":"ws://")+n+":"+e+r+"peerjs?key="+o,a}return e(i,t),i.prototype.start=function(t,i){var n=this;this._id=t,!this._socket&&this._disconnected&&(this._socket=new WebSocket(this._baseUrl+"&id="+t+"&token="+i),this._disconnected=!1,this._socket.onmessage=function(t){var i;try{i=JSON.parse(t.data),l.default.log("Server message received:",i)}catch(s){return void l.default.log("Invalid server message",t.data)}n.emit(u.SocketEventType.Message,i)},this._socket.onclose=function(t){n._disconnected||(l.default.log("Socket closed.",t),n._cleanup(),n._disconnected=!0,n.emit(u.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),l.default.log("Socket open"),n._scheduleHeartbeat())})},i.prototype._scheduleHeartbeat=function(){var t=this;this._wsPingTimer=setTimeout((function(){t._sendHeartbeat()}),this.pingInterval)},i.prototype._sendHeartbeat=function(){if(this._wsOpen()){var t=JSON.stringify({type:u.ServerMessageType.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}else l.default.log("Cannot send heartbeat, because socket closed")},i.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},i.prototype._sendQueuedMessages=function(){var t,i,n=o(this._messagesQueue);this._messagesQueue=[];try{for(var e=s(n),r=e.next();!r.done;r=e.next())this.send(r.value)}catch(h){t={error:h}}finally{try{r&&!r.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}},i.prototype.send=function(t){if(!this._disconnected)if(this._id)if(t.type){if(this._wsOpen()){var i=JSON.stringify(t);this._socket.send(i)}}else this.emit(u.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(t)},i.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},i.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},i}(c.EventEmitter);n.Socket=h},{eventemitter3:"JJlS","./logger":"WOs9","./enums":"ZRYf"}],HCdX:[function(t,i,n){var e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var r in i=arguments[n])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,i,n,e){return new(n||(n=Promise))((function(r,o){function s(t){try{c(e.next(t))}catch(i){o(i)}}function a(t){try{c(e.throw(t))}catch(i){o(i)}}function c(t){var i;t.done?r(t.value):(i=t.value,i instanceof n?i:new n((function(t){t(i)}))).then(s,a)}c((e=e.apply(t,i||[])).next())}))},o=this&&this.__generator||function(t,i){var n,e,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,e&&(r=2&o[0]?e.return:o[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,o[1])).done)return r;switch(e=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,e=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(t,s)}catch(a){o=[6,a],e=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./util"),c=s(t("./logger")),l=t("./enums"),u=function(){function t(t){this.connection=t}return t.prototype.startConnection=function(t){var i=this._startPeerConnection();if(this.connection.peerConnection=i,this.connection.type===l.ConnectionType.Media&&t._stream&&this._addTracksToConnection(t._stream,i),t.originator){if(this.connection.type===l.ConnectionType.Data){var n=this.connection,e=i.createDataChannel(n.label,{ordered:!!t.reliable});n.initialize(e)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},t.prototype._startPeerConnection=function(){c.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},t.prototype._setupListeners=function(t){var i=this,n=this.connection.peer,e=this.connection.connectionId,r=this.connection.type,o=this.connection.provider;c.default.log("Listening for ICE candidates."),t.onicecandidate=function(t){t.candidate&&t.candidate.candidate&&(c.default.log("Received ICE candidates for "+n+":",t.candidate),o.socket.send({type:l.ServerMessageType.Candidate,payload:{candidate:t.candidate,type:r,connectionId:e},dst:n}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":c.default.log("iceConnectionState is failed, closing connections to "+n),i.connection.emit(l.ConnectionEventType.Error,new Error("Negotiation of connection to "+n+" failed.")),i.connection.close();break;case"closed":c.default.log("iceConnectionState is closed, closing connections to "+n),i.connection.emit(l.ConnectionEventType.Error,new Error("Connection to "+n+" closed.")),i.connection.close();break;case"disconnected":c.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=a.util.noop}i.connection.emit(l.ConnectionEventType.IceStateChanged,t.iceConnectionState)},c.default.log("Listening for data channel"),t.ondatachannel=function(t){c.default.log("Received data channel");var i=t.channel;o.getConnection(n,e).initialize(i)},c.default.log("Listening for remote stream"),t.ontrack=function(t){c.default.log("Received remote stream");var r=t.streams[0],s=o.getConnection(n,e);s.type===l.ConnectionType.Media&&i._addStreamToMediaConnection(r,s)}},t.prototype.cleanup=function(){c.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var i=!1;if(this.connection.type===l.ConnectionType.Data){var n=this.connection.dataChannel;n&&(i=!!n.readyState&&"closed"!==n.readyState)}("closed"!==t.signalingState||i)&&t.close()}},t.prototype._makeOffer=function(){return r(this,void 0,Promise,(function(){var t,i,n,r,s,u,h;return o(this,(function(o){switch(o.label){case 0:t=this.connection.peerConnection,i=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:n=o.sent(),c.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return o.sent(),c.default.log("Set localDescription:",n,"for:"+this.connection.peer),r={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:a.util.browser},this.connection.type===l.ConnectionType.Data&&(s=this.connection,r=e(e({},r),{label:s.label,reliable:s.reliable,serialization:s.serialization})),i.socket.send({type:l.ServerMessageType.Offer,payload:r,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(u=o.sent())&&(i.emitError(l.PeerErrorType.WebRTC,u),c.default.log("Failed to setLocalDescription, ",u)),[3,6];case 6:return[3,8];case 7:return h=o.sent(),i.emitError(l.PeerErrorType.WebRTC,h),c.default.log("Failed to createOffer, ",h),[3,8];case 8:return[2]}}))}))},t.prototype._makeAnswer=function(){return r(this,void 0,Promise,(function(){var t,i,n,e,r;return o(this,(function(o){switch(o.label){case 0:t=this.connection.peerConnection,i=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:n=o.sent(),c.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return o.sent(),c.default.log("Set localDescription:",n,"for:"+this.connection.peer),i.socket.send({type:l.ServerMessageType.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:a.util.browser},dst:this.connection.peer}),[3,6];case 5:return e=o.sent(),i.emitError(l.PeerErrorType.WebRTC,e),c.default.log("Failed to setLocalDescription, ",e),[3,6];case 6:return[3,8];case 7:return r=o.sent(),i.emitError(l.PeerErrorType.WebRTC,r),c.default.log("Failed to create answer, ",r),[3,8];case 8:return[2]}}))}))},t.prototype.handleSDP=function(t,i){return r(this,void 0,Promise,(function(){var n,e,r,s;return o(this,(function(o){switch(o.label){case 0:i=new RTCSessionDescription(i),n=this.connection.peerConnection,e=this.connection.provider,c.default.log("Setting remote description",i),r=this,o.label=1;case 1:return o.trys.push([1,5,,6]),[4,n.setRemoteDescription(i)];case 2:return o.sent(),c.default.log("Set remoteDescription:"+t+" for:"+this.connection.peer),"OFFER"!==t?[3,4]:[4,r._makeAnswer()];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:return s=o.sent(),e.emitError(l.PeerErrorType.WebRTC,s),c.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}}))}))},t.prototype.handleCandidate=function(t){return r(this,void 0,Promise,(function(){var i,n,e,r,s,a;return o(this,(function(o){switch(o.label){case 0:c.default.log("handleCandidate:",t),i=t.candidate,n=t.sdpMLineIndex,e=t.sdpMid,r=this.connection.peerConnection,s=this.connection.provider,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.addIceCandidate(new RTCIceCandidate({sdpMid:e,sdpMLineIndex:n,candidate:i}))];case 2:return o.sent(),c.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return a=o.sent(),s.emitError(l.PeerErrorType.WebRTC,a),c.default.log("Failed to handleCandidate, ",a),[3,4];case 4:return[2]}}))}))},t.prototype._addTracksToConnection=function(t,i){if(c.default.log("add tracks from stream "+t.id+" to peer connection"),!i.addTrack)return c.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach((function(n){i.addTrack(n,t)}))},t.prototype._addStreamToMediaConnection=function(t,i){c.default.log("add stream "+t.id+" to media connection "+i.connectionId),i.addStream(t)},t}();n.Negotiator=u},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],tQFK:[function(t,i,n){var e=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(t){function i(i,n,e){var r=t.call(this)||this;return r.peer=i,r.provider=n,r.options=e,r._open=!1,r.metadata=e.metadata,r}return e(i,t),Object.defineProperty(i.prototype,"open",{get:function(){return this._open},enumerable:!0,configurable:!0}),i}(t("eventemitter3").EventEmitter);n.BaseConnection=r},{eventemitter3:"JJlS"}],dbHP:[function(t,i,n){var e=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var r in i=arguments[n])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,n=i&&t[i],e=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./util"),c=s(t("./logger")),l=t("./negotiator"),u=t("./enums"),h=function(t){function i(n,e,r){var o=t.call(this,n,e,r)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||i.ID_PREFIX+a.util.randomToken(),o._negotiator=new l.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return e(i,t),Object.defineProperty(i.prototype,"type",{get:function(){return u.ConnectionType.Media},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"localStream",{get:function(){return this._localStream},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!0,configurable:!0}),i.prototype.addStream=function(i){c.default.log("Receiving stream",i),this._remoteStream=i,t.prototype.emit.call(this,u.ConnectionEventType.Stream,i)},i.prototype.handleMessage=function(t){var i=t.type,n=t.payload;switch(t.type){case u.ServerMessageType.Answer:this._negotiator.handleSDP(i,n.sdp),this._open=!0;break;case u.ServerMessageType.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:c.default.warn("Unrecognized message type:"+i+" from peer:"+this.peer)}},i.prototype.answer=function(t,i){var n,e;if(void 0===i&&(i={}),this._localStream)c.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=t,i&&i.sdpTransform&&(this.options.sdpTransform=i.sdpTransform),this._negotiator.startConnection(r(r({},this.options._payload),{_stream:t}));var s=this.provider._getMessages(this.connectionId);try{for(var a=o(s),l=a.next();!l.done;l=a.next())this.handleMessage(l.value)}catch(u){n={error:u}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(n)throw n.error}}this._open=!0}},i.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,u.ConnectionEventType.Close))},i.ID_PREFIX="mc_",i}(t("./baseconnection").BaseConnection);n.MediaConnection=h},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],GGp6:[function(t,i,n){var e=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var o=t("eventemitter3"),s=r(t("./logger")),a=function(t){function i(){var i=t.call(this)||this;return i.fileReader=new FileReader,i._queue=[],i._processing=!1,i.fileReader.onload=function(t){i._processing=!1,t.target&&i.emit("done",t.target.result),i.doNextTask()},i.fileReader.onerror=function(t){s.default.error("EncodingQueue error:",t),i._processing=!1,i.destroy(),i.emit("error",t)},i}return e(i,t),Object.defineProperty(i.prototype,"queue",{get:function(){return this._queue},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"processing",{get:function(){return this._processing},enumerable:!0,configurable:!0}),i.prototype.enque=function(t){this.queue.push(t),this.processing||this.doNextTask()},i.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},i.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},i}(o.EventEmitter);n.EncodingQueue=a},{eventemitter3:"JJlS","./logger":"WOs9"}],GBTQ:[function(t,i,n){var e=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),r=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,n=i&&t[i],e=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./util"),a=o(t("./logger")),c=t("./negotiator"),l=t("./enums"),u=t("./baseconnection"),h=t("./encodingQueue"),d=function(t){function i(n,e,r){var o=t.call(this,n,e,r)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new h.EncodingQueue,o.connectionId=o.options.connectionId||i.ID_PREFIX+s.util.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||l.SerializationType.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",(function(t){o._bufferedSend(t)})),o._encodingQueue.on("error",(function(){a.default.error("DC#"+o.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),o.close()})),o._negotiator=new c.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return e(i,t),Object.defineProperty(i.prototype,"type",{get:function(){return l.ConnectionType.Data},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!0,configurable:!0}),i.prototype.initialize=function(t){this._dc=t,this._configureDataChannel()},i.prototype._configureDataChannel=function(){var t=this;s.util.supports.binaryBlob&&!s.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){a.default.log("DC#"+t.connectionId+" dc connection success"),t._open=!0,t.emit(l.ConnectionEventType.Open)},this.dataChannel.onmessage=function(i){a.default.log("DC#"+t.connectionId+" dc onmessage:",i.data),t._handleDataMessage(i)},this.dataChannel.onclose=function(){a.default.log("DC#"+t.connectionId+" dc closed for:",t.peer),t.close()}},i.prototype._handleDataMessage=function(i){var n=this,e=i.data,r=e.constructor,o=e;if(this.serialization===l.SerializationType.Binary||this.serialization===l.SerializationType.BinaryUTF8){if(r===Blob)return void s.util.blobToArrayBuffer(e,(function(t){var i=s.util.unpack(t);n.emit(l.ConnectionEventType.Data,i)}));if(r===ArrayBuffer)o=s.util.unpack(e);else if(r===String){var a=s.util.binaryStringToArrayBuffer(e);o=s.util.unpack(a)}}else this.serialization===l.SerializationType.JSON&&(o=this.parse(e));o.__peerData?this._handleChunk(o):t.prototype.emit.call(this,l.ConnectionEventType.Data,o)},i.prototype._handleChunk=function(t){var i=t.__peerData,n=this._chunkedData[i]||{data:[],count:0,total:t.total};if(n.data[t.n]=t.data,n.count++,this._chunkedData[i]=n,n.total===n.count){delete this._chunkedData[i];var e=new Blob(n.data);this._handleDataMessage({data:e})}},i.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,l.ConnectionEventType.Close))},i.prototype.send=function(i,n){if(this.open)if(this.serialization===l.SerializationType.JSON)this._bufferedSend(this.stringify(i));else if(this.serialization===l.SerializationType.Binary||this.serialization===l.SerializationType.BinaryUTF8){var e=s.util.pack(i);if(!n&&e.size>s.util.chunkedMTU)return void this._sendChunks(e);s.util.supports.binaryBlob?this._bufferedSend(e):this._encodingQueue.enque(e)}else this._bufferedSend(i);else t.prototype.emit.call(this,l.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},i.prototype._bufferedSend=function(t){!this._buffering&&this._trySend(t)||(this._buffer.push(t),this._bufferSize=this._buffer.length)},i.prototype._trySend=function(n){var e=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>i.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout((function(){e._buffering=!1,e._tryBuffer()}),50),!1;try{this.dataChannel.send(n)}catch(t){return a.default.error("DC#:"+this.connectionId+" Error when sending:",t),this._buffering=!0,this.close(),!1}return!0},i.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},i.prototype._sendChunks=function(t){var i,n,e=s.util.chunk(t);a.default.log("DC#"+this.connectionId+" Try to send "+e.length+" chunks...");try{for(var o=r(e),c=o.next();!c.done;c=o.next())this.send(c.value,!0)}catch(l){i={error:l}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}},i.prototype.handleMessage=function(t){var i=t.payload;switch(t.type){case l.ServerMessageType.Answer:this._negotiator.handleSDP(t.type,i.sdp);break;case l.ServerMessageType.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:a.default.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},i.ID_PREFIX="dc_",i.MAX_BUFFERED_AMOUNT=8388608,i}(u.BaseConnection);n.DataConnection=d},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],in7L:[function(t,i,n){var e=this&&this.__awaiter||function(t,i,n,e){return new(n||(n=Promise))((function(r,o){function s(t){try{c(e.next(t))}catch(i){o(i)}}function a(t){try{c(e.throw(t))}catch(i){o(i)}}function c(t){var i;t.done?r(t.value):(i=t.value,i instanceof n?i:new n((function(t){t(i)}))).then(s,a)}c((e=e.apply(t,i||[])).next())}))},r=this&&this.__generator||function(t,i){var n,e,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,e&&(r=2&o[0]?e.return:o[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,o[1])).done)return r;switch(e=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,e=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(t,s)}catch(a){o=[6,a],e=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./util"),a=o(t("./logger")),c=function(){function t(t){this._options=t}return t.prototype._buildUrl=function(t){return(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+t+"?ts="+(new Date).getTime()+Math.random()},t.prototype.retrieveId=function(){return e(this,void 0,Promise,(function(){var t,i,n,e;return r(this,(function(r){switch(r.label){case 0:t=this._buildUrl("id"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(i=r.sent()).status)throw new Error("Error. Status:"+i.status);return[2,i.text()];case 3:throw n=r.sent(),a.default.error("Error retrieving ID",n),e="","/"===this._options.path&&this._options.host!==s.util.CLOUD_HOST&&(e=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+e);case 4:return[2]}}))}))},t.prototype.listAllPeers=function(){return e(this,void 0,Promise,(function(){var t,i,n;return r(this,(function(e){switch(e.label){case 0:t=this._buildUrl("peers"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(i=e.sent()).status){if(401===i.status)throw new Error("It doesn't look like you have permission to list peers IDs. "+(this._options.host===s.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature."));throw new Error("Error. Status:"+i.status)}return[2,i.json()];case 3:throw n=e.sent(),a.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 4:return[2]}}))}))},t}();n.API=c},{"./util":"BHXf","./logger":"WOs9"}],Hxpd:[function(t,i,n){var e=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function e(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var r in i=arguments[n])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var i="function"==typeof Symbol&&Symbol.iterator,n=i&&t[i],e=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,i){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,r,o=n.call(t),s=[];try{for(;(void 0===i||i-- >0)&&!(e=o.next()).done;)s.push(e.value)}catch(u){r={error:u}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("eventemitter3"),l=t("./util"),u=a(t("./logger")),h=t("./socket"),d=t("./mediaconnection"),f=t("./dataconnection"),p=t("./enums"),m=t("./api"),v=function(t){function i(n,e){var o,s=t.call(this)||this;return s._id=null,s._lastServerId=null,s._destroyed=!1,s._disconnected=!1,s._open=!1,s._connections=new Map,s._lostMessages=new Map,n&&n.constructor==Object?e=n:n&&(o=n.toString()),e=r({debug:0,host:l.util.CLOUD_HOST,port:l.util.CLOUD_PORT,path:"/",key:i.DEFAULT_KEY,token:l.util.randomToken(),config:l.util.defaultConfig},e),s._options=e,"/"===s._options.host&&(s._options.host=window.location.hostname),s._options.path&&("/"!==s._options.path[0]&&(s._options.path="/"+s._options.path),"/"!==s._options.path[s._options.path.length-1]&&(s._options.path+="/")),void 0===s._options.secure&&s._options.host!==l.util.CLOUD_HOST?s._options.secure=l.util.isSecure():s._options.host==l.util.CLOUD_HOST&&(s._options.secure=!0),s._options.logFunction&&u.default.setLogFunction(s._options.logFunction),u.default.logLevel=s._options.debug||0,s._api=new m.API(e),s._socket=s._createServerConnection(),l.util.supports.audioVideo||l.util.supports.data?o&&!l.util.validateId(o)?(s._delayedAbort(p.PeerErrorType.InvalidID,'ID "'+o+'" is invalid'),s):(o?s._initialize(o):s._api.retrieveId().then((function(t){return s._initialize(t)})).catch((function(t){return s._abort(p.PeerErrorType.ServerError,t)})),s):(s._delayedAbort(p.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),s)}return e(i,t),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"open",{get:function(){return this._open},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"socket",{get:function(){return this._socket},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"connections",{get:function(){var t,i,n=Object.create(null);try{for(var e=o(this._connections),r=e.next();!r.done;r=e.next()){var a=s(r.value,2);n[a[0]]=a[1]}}catch(f){t={error:f}}finally{try{r&&!r.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}return n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!0,configurable:!0}),i.prototype._createServerConnection=function(){var t=this,i=new h.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return i.on(p.SocketEventType.Message,(function(i){t._handleMessage(i)})),i.on(p.SocketEventType.Error,(function(i){t._abort(p.PeerErrorType.SocketError,i)})),i.on(p.SocketEventType.Disconnected,(function(){t.disconnected||(t.emitError(p.PeerErrorType.Network,"Lost connection to server."),t.disconnect())})),i.on(p.SocketEventType.Close,(function(){t.disconnected||t._abort(p.PeerErrorType.SocketClosed,"Underlying socket is already closed.")})),i},i.prototype._initialize=function(t){this._id=t,this.socket.start(t,this._options.token)},i.prototype._handleMessage=function(t){var i,n,e=t.type,r=t.payload,s=t.src;switch(e){case p.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(p.PeerEventType.Open,this.id);break;case p.ServerMessageType.Error:this._abort(p.PeerErrorType.ServerError,r.msg);break;case p.ServerMessageType.IdTaken:this._abort(p.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case p.ServerMessageType.InvalidKey:this._abort(p.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case p.ServerMessageType.Leave:u.default.log("Received leave message from "+s),this._cleanupPeer(s),this._connections.delete(s);break;case p.ServerMessageType.Expire:this.emitError(p.PeerErrorType.PeerUnavailable,"Could not connect to peer "+s);break;case p.ServerMessageType.Offer:var a=r.connectionId;if((m=this.getConnection(s,a))&&(m.close(),u.default.warn("Offer received for existing Connection ID:"+a)),r.type===p.ConnectionType.Media)m=new d.MediaConnection(s,this,{connectionId:a,_payload:r,metadata:r.metadata}),this._addConnection(s,m),this.emit(p.PeerEventType.Call,m);else{if(r.type!==p.ConnectionType.Data)return void u.default.warn("Received malformed connection type:"+r.type);m=new f.DataConnection(s,this,{connectionId:a,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable}),this._addConnection(s,m),this.emit(p.PeerEventType.Connection,m)}var c=this._getMessages(a);try{for(var l=o(c),h=l.next();!h.done;h=l.next())m.handleMessage(h.value)}catch(v){i={error:v}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}break;default:if(!r)return void u.default.warn("You received a malformed message from "+s+" of type "+e);var m;(m=this.getConnection(s,a=r.connectionId))&&m.peerConnection?m.handleMessage(t):a?this._storeMessage(a,t):u.default.warn("You received an unrecognized message:",t)}},i.prototype._storeMessage=function(t,i){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(i)},i.prototype._getMessages=function(t){var i=this._lostMessages.get(t);return i?(this._lostMessages.delete(t),i):[]},i.prototype.connect=function(t,i){if(void 0===i&&(i={}),this.disconnected)return u.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(p.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new f.DataConnection(t,this,i);return this._addConnection(t,n),n},i.prototype.call=function(t,i,n){if(void 0===n&&(n={}),this.disconnected)return u.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(p.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(i){n._stream=i;var e=new d.MediaConnection(t,this,n);return this._addConnection(t,e),e}u.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},i.prototype._addConnection=function(t,i){u.default.log("add connection "+i.type+":"+i.connectionId+" to peerId:"+t),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(i)},i.prototype._removeConnection=function(t){var i=this._connections.get(t.peer);if(i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}this._lostMessages.delete(t.connectionId)},i.prototype.getConnection=function(t,i){var n,e,r=this._connections.get(t);if(!r)return null;try{for(var s=o(r),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.connectionId===i)return c}}catch(d){n={error:d}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(n)throw n.error}}return null},i.prototype._delayedAbort=function(t,i){var n=this;setTimeout((function(){n._abort(t,i)}),0)},i.prototype._abort=function(t,i){u.default.error("Aborting!"),this.emitError(t,i),this._lastServerId?this.disconnect():this.destroy()},i.prototype.emitError=function(t,i){var n;u.default.error("Error:",i),(n="string"==typeof i?new Error(i):i).type=t,this.emit(p.PeerEventType.Error,n)},i.prototype.destroy=function(){this.destroyed||(u.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(p.PeerEventType.Close))},i.prototype._cleanup=function(){var t,i;try{for(var n=o(this._connections.keys()),e=n.next();!e.done;e=n.next()){var r=e.value;this._cleanupPeer(r),this._connections.delete(r)}}catch(l){t={error:l}}finally{try{e&&!e.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}this.socket.removeAllListeners()},i.prototype._cleanupPeer=function(t){var i,n,e=this._connections.get(t);if(e)try{for(var r=o(e),s=r.next();!s.done;s=r.next())s.value.close()}catch(u){i={error:u}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},i.prototype.disconnect=function(){if(!this.disconnected){var t=this.id;u.default.log("Disconnect peer with ID:"+t),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit(p.PeerEventType.Disconnected,t)}},i.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)u.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");u.default.error("In a hurry? We're still trying to make the initial connection!")}},i.prototype.listAllPeers=function(t){var i=this;void 0===t&&(t=function(){}),this._api.listAllPeers().then((function(i){return t(i)})).catch((function(t){return i._abort(p.PeerErrorType.ServerError,t)}))},i.DEFAULT_KEY="peerjs",i}(c.EventEmitter);n.Peer=v},{eventemitter3:"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],iTK6:[function(t,i,n){Object.defineProperty(n,"__esModule",{value:!0});var e=t("./util"),r=t("./peer");n.peerjs={Peer:r.Peer,util:e.util},n.default=r.Peer,window.peerjs=n.peerjs,window.Peer=r.Peer},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"])}(N={exports:{}}),N.exports);const G=(F=L)&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F;var F;const U=class{constructor(i){t(this,i),this.connectionMap=new Map,this.nickname="Player"+Math.random().toString().substring(2,7),this.messageList=[]}connectedCallback(){this.peer=new G({host:"peer-signaling-server.herokuapp.com",secure:!0,key:"peerjs",path:"/"}),this.peer.on("open",t=>this.peerId=t),this.peer.on("connection",t=>{this.connectionMap.has(t.peer)||this.connectionMap.set(t.peer,this.peer.connect(t.peer)),t.on("data",t=>this.messageList=this.messageList.concat(JSON.parse(t)))})}render(){return n("ion-app",null,n("ion-menu",{side:"start","menu-id":"first","content-id":"main"},n("ion-item",null,n("ion-label",{position:"stacked"},"My Peer Id"),n("ion-input",{readonly:!0,value:this.peerId})),n("ion-item",null,n("ion-label",{position:"stacked"},"My Nickname"),n("ion-input",{value:this.nickname,onIonChange:({detail:t})=>this.nickname=t.value})),n("ion-button",{onClick:()=>{const t=prompt("Enter peer id to connect"),i=this.peer.connect(t);this.connectionMap.set(t,i),i.on("open",()=>{const t={nickname:this.nickname,message:"hi!"};i.send(JSON.stringify(t)),this.messageList=this.messageList.concat(t)})}},"Connect To"),n("app-chat",{messageList:this.messageList,onMessageSend:({detail:t})=>{const i={nickname:this.nickname,message:t};for(const n of this.connectionMap.values())n.send(JSON.stringify(i));this.messageList=this.messageList.concat(i)}})),n("ion-router",{useHash:!0},n("ion-route",{url:"/",component:"app-home"})),n("ion-nav",{id:"main"}))}};U.style="app-chat{height:calc(100% - 100px)}";const B=class{constructor(i){t(this,i)}componentDidLoad(){J(()=>{const t=u(window,"hybrid");l.getBoolean("_testing")||__sc_import_app("./p-e5400d39.js").then(t=>t.startTapClick(l)),l.getBoolean("statusTap",t)&&__sc_import_app("./p-439b20a6.js").then(t=>t.startStatusTap()),l.getBoolean("inputShims",W())&&__sc_import_app("./p-bd9f8cab.js").then(t=>t.startInputShims(l)),l.getBoolean("hardwareBackButton",t)&&__sc_import_app("./p-7261e130.js").then(t=>t.startHardwareBackButton()),__sc_import_app("./p-b62e8f49.js").then(t=>t.startFocusVisible())})}render(){const t=c(this);return n(e,{class:{[t]:!0,"ion-page":!0,"force-statusbar-padding":l.getBoolean("_forceStatusbarPadding")}})}get el(){return r(this)}},W=()=>u(window,"ios")&&u(window,"mobile"),J=t=>{"requestIdleCallback"in window?window.requestIdleCallback(t):setTimeout(t,32)};B.style="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}";const Y=class{constructor(n){t(this,n),this.lastClick=-1e4,this.blocker=h.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0,this.ionBackdropTap=i(this,"ionBackdropTap",7)}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onTouchStart(t){this.lastClick=d(t),this.emitTap(t)}onMouseDown(t){this.lastClick<d(t)-2500&&this.emitTap(t)}emitTap(t){this.stopPropagation&&(t.preventDefault(),t.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const t=c(this);return n(e,{tabindex:"-1",class:{[t]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}};Y.style={md:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}"};const V=class{constructor(n){t(this,n),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.buttonType="button",this.disabled=!1,this.routerDirection="forward",this.strong=!1,this.type="button",this.handleClick=t=>{if("button"===this.type)y(this.href,t,this.routerDirection);else if(f(this.el)){const i=this.el.closest("form");if(i){t.preventDefault();const n=document.createElement("button");n.type=this.type,n.style.display="none",i.appendChild(n),n.click(),n.remove()}}},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.ionFocus=i(this,"ionFocus",7),this.ionBlur=i(this,"ionBlur",7)}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider")}get hasIconOnly(){return!!this.el.querySelector('ion-icon[slot="icon-only"]')}get rippleType(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}render(){const t=c(this),{buttonType:i,type:r,disabled:o,rel:s,target:a,size:l,href:u,color:h,expand:d,hasIconOnly:f,shape:p,strong:m}=this,v=void 0===l&&this.inItem?"small":l,b=void 0===u?"button":"a",g="button"===b?{type:r}:{download:this.download,href:u,rel:s,target:a};let w=this.fill;return void 0===w&&(w=this.inToolbar||this.inListHeader?"clear":"solid"),n(e,{onClick:this.handleClick,"aria-disabled":o?"true":null,class:Object.assign(Object.assign({},x(h)),{[t]:!0,[i]:!0,[`${i}-${d}`]:void 0!==d,[`${i}-${v}`]:void 0!==v,[`${i}-${p}`]:void 0!==p,[`${i}-${w}`]:!0,[`${i}-strong`]:m,"in-toolbar":k("ion-toolbar",this.el),"in-toolbar-color":k("ion-toolbar[color]",this.el),"button-has-icon-only":f,"button-disabled":o,"ion-activatable":!0,"ion-focusable":!0})},n(b,Object.assign({},g,{class:"button-native",disabled:o,onFocus:this.onFocus,onBlur:this.onBlur,part:"button"}),n("span",{class:"button-inner",part:"button-inner"},n("slot",{name:"icon-only"}),n("slot",{name:"start"}),n("slot",null),n("slot",{name:"end"})),"md"===t&&n("ion-ripple-effect",{type:this.rippleType})))}get el(){return r(this)}};V.style={md:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;pointer-events:auto;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){margin-left:-0.3em;margin-right:0.3em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}::slotted(ion-icon[slot=end]){margin-left:0.3em;margin-right:-0.2em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em}}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:4px;--padding-top:0;--padding-bottom:0;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast);opacity:0.24}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base);opacity:0.12}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast);opacity:0.08}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base);opacity:0.04}}'};const Z=class{constructor(i){t(this,i),this.button=!1,this.type="button",this.disabled=!1,this.routerDirection="forward"}isClickable(){return void 0!==this.href||this.button}renderCard(t){const i=this.isClickable();if(!i)return[n("slot",null)];const{href:e,routerDirection:r}=this,o=i?void 0===e?"button":"a":"div";return n(o,Object.assign({},"button"===o?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target},{class:"card-native",disabled:this.disabled,onClick:t=>y(e,t,r)}),n("slot",null),i&&"md"===t&&n("ion-ripple-effect",null))}render(){const t=c(this);return n(e,{class:Object.assign(Object.assign({[t]:!0},x(this.color)),{"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(t))}};Z.style={md:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-item-background, var(--ion-background-color, #fff));--color:var(--ion-color-step-550, #737373);margin-left:10px;margin-right:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:14px;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px}}"};const H=class{constructor(i){t(this,i)}render(){const t=c(this);return n(e,{class:{[t]:!0,[`card-content-${t}`]:!0}})}};H.style={md:"ion-card-content{display:block;position:relative}.card-content-md{padding-left:16px;padding-right:16px;padding-top:13px;padding-bottom:13px;font-size:14px;line-height:1.5}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.card-content-md{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}.card-content-md h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.card-content-md h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.card-content-md h3,.card-content-md h4,.card-content-md h5,.card-content-md h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal}.card-content-md p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:1.5}ion-card-header+.card-content-md{padding-top:0}"};const Q=class{constructor(i){t(this,i),this.translucent=!1}render(){const t=c(this);return n(e,{class:Object.assign(Object.assign({},x(this.color)),{"card-header-translucent":this.translucent,"ion-inherit-color":!0,[t]:!0})},n("slot",null))}};Q.style={md:":host{--background:transparent;--color:inherit;display:block;position:relative;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}::slotted(ion-card-title:not(:first-child)),::slotted(ion-card-subtitle:not(:first-child)){margin-top:8px}"};const X=class{constructor(i){t(this,i)}render(){const t=c(this);return n(e,{role:"heading","aria-level":"3",class:Object.assign(Object.assign({},x(this.color)),{"ion-inherit-color":!0,[t]:!0})},n("slot",null))}};X.style={md:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-550, #737373);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:14px;font-weight:500}"};const $=class{constructor(n){t(this,n),this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.fullscreen=!1,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1,this.ionScrollStart=i(this,"ionScrollStart",7),this.ionScroll=i(this,"ionScroll",7),this.ionScrollEnd=i(this,"ionScrollEnd",7)}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}onClick(t){this.isScrolling&&(t.preventDefault(),t.stopPropagation())}shouldForceOverscroll(){const{forceOverscroll:t}=this,i=c(this);return void 0===t?"ios"===i&&u("ios"):t}resize(){this.fullscreen?o(()=>this.readDimensions()):0===this.cTop&&0===this.cBottom||(this.cTop=this.cBottom=0,s(this))}readDimensions(){const t=q(this.el),i=Math.max(this.el.offsetTop,0),n=Math.max(t.offsetHeight-i-this.el.offsetHeight,0);(i!==this.cTop||n!==this.cBottom)&&(this.cTop=i,this.cBottom=n,s(this))}onScroll(t){const i=Date.now(),n=!this.isScrolling;this.lastScroll=i,n&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,o(i=>{this.queued=!1,this.detail.event=t,K(this.detail,this.scrollEl,i,n),this.ionScroll.emit(this.detail)}))}getScrollElement(){return Promise.resolve(this.scrollEl)}scrollToTop(t=0){return this.scrollToPoint(void 0,0,t)}scrollToBottom(t=0){return this.scrollToPoint(void 0,this.scrollEl.scrollHeight-this.scrollEl.clientHeight,t)}scrollByPoint(t,i,n){return this.scrollToPoint(t+this.scrollEl.scrollLeft,i+this.scrollEl.scrollTop,n)}async scrollToPoint(t,i,n=0){const e=this.scrollEl;if(n<32)return null!=i&&(e.scrollTop=i),void(null!=t&&(e.scrollLeft=t));let r,o=0;const s=new Promise(t=>r=t),a=e.scrollTop,c=e.scrollLeft,l=null!=i?i-a:0,u=null!=t?t-c:0,h=t=>{const i=Math.min(1,(t-o)/n)-1,s=Math.pow(i,3)+1;0!==l&&(e.scrollTop=Math.floor(s*l+a)),0!==u&&(e.scrollLeft=Math.floor(s*u+c)),s<1?requestAnimationFrame(h):r()};return requestAnimationFrame(t=>{o=t,h(t)}),s}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{scrollX:t,scrollY:i}=this,r=c(this),o=this.shouldForceOverscroll(),s="ios"===r&&l.getBoolean("experimentalTransitionShadow",!0);return this.resize(),n(e,{class:Object.assign(Object.assign({},x(this.color)),{[r]:!0,"content-sizing":k("ion-popover",this.el),overscroll:o}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},n("div",{id:"background-content"}),n("main",{class:{"inner-scroll":!0,"scroll-x":t,"scroll-y":i,overscroll:(t||i)&&o},ref:t=>this.scrollEl=t,onScroll:this.scrollEvents?t=>this.onScroll(t):void 0},n("slot",null)),s?n("div",{class:"transition-effect"},n("div",{class:"transition-cover"}),n("div",{class:"transition-shadow"})):null,n("slot",{name:"fixed"}))}get el(){return r(this)}},q=t=>{const i=t.closest("ion-tabs");return i||(t.closest("ion-app,ion-page,.ion-page,page-inner")||(t=>t.parentElement?t.parentElement:t.parentNode&&t.parentNode.host?t.parentNode.host:null)(t))},K=(t,i,n,e)=>{const r=t.currentX,o=t.currentY,s=i.scrollLeft,a=i.scrollTop,c=n-t.currentTime;if(e&&(t.startTime=n,t.startX=s,t.startY=a,t.velocityX=t.velocityY=0),t.currentTime=n,t.currentX=t.scrollLeft=s,t.currentY=t.scrollTop=a,t.deltaX=s-t.startX,t.deltaY=a-t.startY,c>0&&c<100){const i=(a-o)/c;t.velocityX=(s-r)/c*.7+.3*t.velocityX,t.velocityY=.7*i+.3*t.velocityY}};$.style=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.inner-scroll{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;will-change:scroll-position}.scroll-y{-ms-touch-action:pan-y;touch-action:pan-y;overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{-ms-touch-action:pan-x;touch-action:pan-x;overflow-x:var(--overflow);overscroll-behavior-x:contain}.scroll-x.scroll-y{-ms-touch-action:auto;touch-action:auto}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){contain:none}:host(.content-sizing) .inner-scroll{position:relative}.transition-effect{display:none;position:absolute;left:-100%;width:100%;height:100%;opacity:0;pointer-events:none}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;right:0;width:10px;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAgCAYAAAAIXrg4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTE3MDgzRkQ5QTkyMTFFOUEwNzQ5MkJFREE1NUY2MjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTE3MDgzRkU5QTkyMTFFOUEwNzQ5MkJFREE1NUY2MjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMTcwODNGQjlBOTIxMUU5QTA3NDkyQkVEQTU1RjYyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMTcwODNGQzlBOTIxMUU5QTA3NDkyQkVEQTU1RjYyNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmePEuQAAABNSURBVHjaYvz//z8DIxAwMDAwATGMhmFmPDQuOSZks0AMmoJBaQHjkPfB0Lfg/2gQjVow+HPy/yHvg9GiYjQfjMbBqAWjFgy/4hogwADYqwdzxy5BuwAAAABJRU5ErkJggg==);background-repeat:repeat-y;background-size:10px 16px}::slotted([slot=fixed]){position:absolute}';const tt=t=>{if(1===t.nodeType){if("script"===t.nodeName.toLowerCase())return!1;for(let i=0;i<t.attributes.length;i++){const n=t.attributes[i].value;if(j(n)&&0===n.toLowerCase().indexOf("on"))return!1}for(let i=0;i<t.childNodes.length;i++)if(!tt(t.childNodes[i]))return!1}return!0},it=new Map,nt=new Map,et=class{constructor(i){t(this,i),this.isVisible=!1,this.mode=rt(),this.lazy=!1}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(t,i,n){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const e=this.io=new window.IntersectionObserver(t=>{t[0].isIntersecting&&(e.disconnect(),this.io=void 0,n())},{rootMargin:i});e.observe(t)}else n()}loadIcon(){if(this.isVisible){const t=O(this);t&&(it.has(t)?this.svgContent=it.get(t):(t=>{let i=nt.get(t);if(!i){if("undefined"==typeof fetch)return it.set(t,""),Promise.resolve();i=fetch(t).then(i=>{if(i.ok)return i.text().then(i=>{it.set(t,(t=>{if(t&&"undefined"!=typeof document){const i=document.createElement("div");i.innerHTML=t;for(let t=i.childNodes.length-1;t>=0;t--)"svg"!==i.childNodes[t].nodeName.toLowerCase()&&i.removeChild(i.childNodes[t]);const n=i.firstElementChild;if(n&&"svg"===n.nodeName.toLowerCase()){const t=n.getAttribute("class")||"";if(n.setAttribute("class",(t+" s-ion-icon").trim()),tt(n))return i.innerHTML}}return""})(i))});it.set(t,"")}),nt.set(t,i)}return i})(t).then(()=>this.svgContent=it.get(t)))}if(!this.ariaLabel){const t=S(this.name,this.icon,this.mode,this.ios,this.md);t&&(this.ariaLabel=t.replace(/\-/g," "))}}render(){const t=this.mode||"md",i=this.flipRtl||this.ariaLabel&&(this.ariaLabel.indexOf("arrow")>-1||this.ariaLabel.indexOf("chevron")>-1)&&!1!==this.flipRtl;return n(e,{role:"img",class:Object.assign(Object.assign({[t]:!0},ot(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":!!i&&"rtl"===this.el.ownerDocument.dir})},n("div",this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return r(this)}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"]}}},rt=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",ot=t=>t?{"ion-color":!0,[`ion-color-${t}`]:!0}:null;et.style=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}";const st=class{constructor(n){t(this,n),this.inputId=`ion-input-${at++}`,this.didBlurAfterEdit=!1,this.hasFocus=!1,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.debounce=0,this.disabled=!1,this.name=this.inputId,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.type="text",this.value="",this.onInput=t=>{const i=t.target;i&&(this.value=i.value||""),this.ionInput.emit(t)},this.onBlur=()=>{this.hasFocus=!1,this.focusChanged(),this.emitStyle(),this.ionBlur.emit()},this.onFocus=()=>{this.hasFocus=!0,this.focusChanged(),this.emitStyle(),this.ionFocus.emit()},this.onKeydown=t=>{this.shouldClearOnEdit()&&(this.didBlurAfterEdit&&this.hasValue()&&"Enter"!==t.key&&this.clearTextInput(),this.didBlurAfterEdit=!1)},this.clearTextInput=t=>{this.clearInput&&!this.readonly&&!this.disabled&&t&&(t.preventDefault(),t.stopPropagation()),this.value="",this.nativeInput&&(this.nativeInput.value="")},this.ionInput=i(this,"ionInput",7),this.ionChange=i(this,"ionChange",7),this.ionBlur=i(this,"ionBlur",7),this.ionFocus=i(this,"ionFocus",7),this.ionStyle=i(this,"ionStyle",7)}debounceChanged(){this.ionChange=p(this.ionChange,this.debounce)}disabledChanged(){this.emitStyle()}valueChanged(){this.emitStyle(),this.ionChange.emit({value:null==this.value?this.value:this.value.toString()})}connectedCallback(){this.emitStyle(),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el}))}async setFocus(){this.nativeInput&&this.nativeInput.focus()}getInputElement(){return Promise.resolve(this.nativeInput)}shouldClearOnEdit(){const{type:t,clearOnEdit:i}=this;return void 0===i?"password"===t:i}getValue(){return"number"==typeof this.value?this.value.toString():(this.value||"").toString()}emitStyle(){this.ionStyle.emit({interactive:!0,input:!0,"has-placeholder":null!=this.placeholder,"has-value":this.hasValue(),"has-focus":this.hasFocus,"interactive-disabled":this.disabled})}focusChanged(){!this.hasFocus&&this.shouldClearOnEdit()&&this.hasValue()&&(this.didBlurAfterEdit=!0)}hasValue(){return this.getValue().length>0}render(){const t=c(this),i=this.getValue(),r=this.inputId+"-lbl",o=m(this.el);return o&&(o.id=r),n(e,{"aria-disabled":this.disabled?"true":null,class:Object.assign(Object.assign({},x(this.color)),{[t]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus})},n("input",{class:"native-input",ref:t=>this.nativeInput=t,"aria-labelledby":r,disabled:this.disabled,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellCheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:i,onInput:this.onInput,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown}),this.clearInput&&!this.readonly&&!this.disabled&&n("button",{type:"button",class:"input-clear-icon",tabindex:"-1",onTouchStart:this.clearTextInput,onMouseDown:this.clearTextInput}))}get el(){return r(this)}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],value:["valueChanged"]}}};let at=0;st.style={md:".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:.5;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--background:transparent;--color:initial;display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;width:100%;padding:0 !important;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item.sc-ion-input-md-h:not(.item-label),ion-item:not(.item-label) .sc-ion-input-md-h{--padding-start:0}.ion-color.sc-ion-input-md-h{color:var(--ion-color-base)}.native-input.sc-ion-input-md{border-radius:var(--border-radius);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.native-input.sc-ion-input-md{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.native-input[disabled].sc-ion-input-md{opacity:0.4}.cloned-input.sc-ion-input-md{left:0;top:0;position:absolute;pointer-events:none}[dir=rtl].sc-ion-input-md .cloned-input.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h .cloned-input.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}.input-clear-icon.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.has-focus.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.has-focus.sc-ion-input-md-h{pointer-events:none}.has-focus.sc-ion-input-md-h input.sc-ion-input-md,.has-focus.sc-ion-input-md-h a.sc-ion-input-md,.has-focus.sc-ion-input-md-h button.sc-ion-input-md{pointer-events:auto}.sc-ion-input-md-h{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:8px;font-size:inherit}.item-label-stacked.sc-ion-input-md-h,.item-label-stacked .sc-ion-input-md-h,.item-label-floating.sc-ion-input-md-h,.item-label-floating .sc-ion-input-md-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0}.input-clear-icon.sc-ion-input-md{background-image:url(\"data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><polygon%20fill='var(--ion-color-step-600,%20%23666666)'%20points='405,136.798%20375.202,107%20256,226.202%20136.798,107%20107,136.798%20226.202,256%20107,375.202%20136.798,405%20256,285.798%20375.202,405%20405,375.202%20285.798,256'/></svg>\");width:30px;height:30px;background-size:22px}"};const ct=class{constructor(i){t(this,i),this.itemStyles=new Map,this.multipleInputs=!1,this.button=!1,this.detailIcon="chevron-forward",this.disabled=!1,this.routerDirection="forward",this.type="button"}itemStyle(t){t.stopPropagation();const i=t.target.tagName,n=t.detail,e={},r=this.itemStyles.get(i)||{};let o=!1;Object.keys(n).forEach(t=>{if(n[t]){const i=`item-${t}`;r[i]||(o=!0),e[i]=!0}}),o||Object.keys(e).length===Object.keys(r).length||(o=!0),o&&(this.itemStyles.set(i,e),s(this))}componentDidLoad(){const t=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),i=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),n=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=t.length+i.length>1||t.length+n.length>1||t.length>0&&this.isClickable()}hasCover(){return 1===this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length&&!this.multipleInputs}isClickable(){return void 0!==this.href||this.button}canActivate(){return this.isClickable()||this.hasCover()}render(){const{detail:t,detailIcon:i,download:r,lines:o,disabled:s,href:a,rel:l,target:u,routerDirection:h}=this,d={},f=c(this),p=this.isClickable(),m=this.canActivate(),v=p?void 0===a?"button":"a":"div",b="button"===v?{type:this.type}:{download:r,href:a,rel:l,target:u},g=void 0!==t?t:"ios"===f&&p;return this.itemStyles.forEach(t=>{Object.assign(d,t)}),n(e,{"aria-disabled":s?"true":null,class:Object.assign(Object.assign(Object.assign({},d),x(this.color)),{item:!0,[f]:!0,[`item-lines-${o}`]:void 0!==o,"item-disabled":s,"in-list":k("ion-list",this.el),"item-multiple-inputs":this.multipleInputs,"ion-activatable":m,"ion-focusable":!0})},n(v,Object.assign({},b,{class:"item-native",disabled:s,onClick:t=>y(a,t,h)}),n("slot",{name:"start"}),n("div",{class:"item-inner"},n("div",{class:"input-wrapper"},n("slot",null)),n("slot",{name:"end"}),g&&n("ion-icon",{icon:i,lazy:!1,class:"item-detail-icon"}),n("div",{class:"item-inner-highlight"})),m&&"md"===f&&n("ion-ripple-effect",null)),n("div",{class:"item-highlight"}))}get el(){return r(this)}};ct.style={md:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-native{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--inner-padding-start);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-inner{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end))}}.item-detail-icon{color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label){-ms-flex:1;flex:1}:host([vertical-align-top]),:host(.item-input){-ms-flex-align:start;align-items:flex-start}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked) .item-native,:host(.item-label-floating) .item-native{-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;bottom:0;position:absolute;background:var(--highlight-background);z-index:1}.item-highlight{height:var(--full-highlight-height)}.item-inner-highlight{height:var(--inset-highlight-height)}:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--color:var(--ion-item-color, var(--ion-text-color, #000));--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--inner-padding-end:16px;--inner-border-width:0 0 1px 0;--highlight-height:2px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);font-size:16px;font-weight:normal;text-transform:none}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-full){--border-width:0 0 1px 0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0;--show-inset-highlight:0}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){margin-right:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted([slot=start]){margin-right:unset;-webkit-margin-end:32px;margin-inline-end:32px}}::slotted([slot=end]){margin-left:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted([slot=end]){margin-left:unset;-webkit-margin-start:32px;margin-inline-start:32px}}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){margin-right:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-right:unset;-webkit-margin-end:32px;margin-inline-end:32px}}::slotted(ion-icon[slot=end]){margin-left:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;-webkit-margin-start:16px;margin-inline-start:16px}}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){padding-right:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-note[slot=start]){padding-right:unset;-webkit-padding-end:16px;padding-inline-end:16px}}::slotted(ion-note[slot=end]){padding-left:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-note[slot=end]){padding-left:unset;-webkit-padding-start:16px;padding-inline-start:16px}}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){width:56px;height:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){margin-right:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){margin-right:unset;-webkit-margin-end:16px;margin-inline-end:16px}}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:unset;-webkit-margin-start:16px;margin-inline-start:16px}}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:11px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){margin-left:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){margin-left:unset;-webkit-margin-start:0;margin-inline-start:0}}::slotted(.button-small){--padding-top:0;--padding-bottom:0;--padding-start:.6em;--padding-end:.6em;height:25px;font-size:12px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0}:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #3880ff)}'};const lt=class{constructor(n){t(this,n),this.noAnimate=!1,this.ionStyle=i(this,"ionStyle",7)}componentWillLoad(){this.noAnimate="floating"===this.position,this.emitStyle()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}positionChanged(){this.emitStyle()}emitStyle(){const t=this.position;this.ionStyle.emit({label:!0,[`label-${t}`]:void 0!==t})}render(){const t=this.position,i=c(this);return n(e,{class:Object.assign(Object.assign({},x(this.color)),{[i]:!0,[`label-${t}`]:void 0!==t,"label-no-animate":this.noAnimate})})}get el(){return r(this)}static get watchers(){return{position:["positionChanged"]}}};lt.style={md:".item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transform:translate3d(0,  50%,  0) scale(0.75);transform:translate3d(0,  50%,  0) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl].sc-ion-label-md-h -no-combinator.label-stacked.sc-ion-label-md-h,[dir=rtl] .sc-ion-label-md-h -no-combinator.label-stacked.sc-ion-label-md-h,[dir=rtl].label-stacked.sc-ion-label-md-h,[dir=rtl] .label-stacked.sc-ion-label-md-h{-webkit-transform-origin:right top;transform-origin:right top}.label-floating.sc-ion-label-md-h{-webkit-transform:translate3d(0,  96%,  0);transform:translate3d(0,  96%,  0);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}[dir=rtl].sc-ion-label-md-h -no-combinator.label-floating.sc-ion-label-md-h,[dir=rtl] .sc-ion-label-md-h -no-combinator.label-floating.sc-ion-label-md-h,[dir=rtl].label-floating.sc-ion-label-md-h,[dir=rtl] .label-floating.sc-ion-label-md-h{-webkit-transform-origin:right top;transform-origin:right top}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.item-select.label-floating.sc-ion-label-md-h,.item-select .label-floating.sc-ion-label-md-h{-webkit-transform:translate3d(0,  130%,  0);transform:translate3d(0,  130%,  0)}.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.label-floating.sc-ion-label-md-h,.item-has-placeholder .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translate3d(0,  50%,  0) scale(0.75);transform:translate3d(0,  50%,  0) scale(0.75)}.item-has-focus.label-stacked.sc-ion-label-md-h,.item-has-focus .label-stacked.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h{color:var(--ion-color-primary, #3880ff)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.ion-color.sc-ion-label-md-s>p,.ion-color .sc-ion-label-md-h.sc-ion-label-md-s>p{color:inherit}"};const ut=class{constructor(n){t(this,n),this.lastOnEnd=0,this.blocker=h.createBlocker({disableScroll:!0}),this.isAnimating=!1,this._isOpen=!1,this.isPaneVisible=!1,this.isEndSide=!1,this.disabled=!1,this.side="start",this.swipeGesture=!0,this.maxEdgeStart=50,this.ionWillOpen=i(this,"ionWillOpen",7),this.ionWillClose=i(this,"ionWillClose",7),this.ionDidOpen=i(this,"ionDidOpen",7),this.ionDidClose=i(this,"ionDidClose",7),this.ionMenuChange=i(this,"ionMenuChange",7)}typeChanged(t,i){const n=this.contentEl;n&&(void 0!==i&&n.classList.remove(`menu-content-${i}`),n.classList.add(`menu-content-${t}`),n.removeAttribute("style")),this.menuInnerEl&&this.menuInnerEl.removeAttribute("style"),this.animation=void 0}disabledChanged(){this.updateState(),this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}sideChanged(){this.isEndSide=v(this.side)}swipeGestureChanged(){this.updateState()}async connectedCallback(){void 0===this.type&&(this.type=l.get("menuType","overlay"));const t=this.el.parentNode;void 0===this.contentId&&console.warn('[DEPRECATED][ion-menu] Using the [main] attribute is deprecated, please use the "contentId" property instead:\nBEFORE:\n  <ion-menu>...</ion-menu>\n  <div main>...</div>\n\nAFTER:\n  <ion-menu contentId="main-content"></ion-menu>\n  <div id="main-content">...</div>\n');const i=void 0!==this.contentId?document.getElementById(this.contentId):t&&t.querySelector&&t.querySelector("[main]");i&&i.tagName?(this.contentEl=i,i.classList.add("menu-content"),this.typeChanged(this.type,void 0),this.sideChanged(),C._register(this),this.gesture=(await __sc_import_app("./p-78321f41.js")).createGesture({el:document,gestureName:"menu-swipe",gesturePriority:30,threshold:10,canStart:t=>this.canStart(t),onWillStart:()=>this.onWillStart(),onStart:()=>this.onStart(),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.updateState()):console.error('Menu: must have a "content" element to listen for drag events on.')}async componentDidLoad(){this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen}),this.updateState()}disconnectedCallback(){this.blocker.destroy(),C._unregister(this),this.animation&&this.animation.destroy(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.animation=void 0,this.contentEl=this.backdropEl=this.menuInnerEl=void 0}onSplitPaneChanged(t){this.isPaneVisible=t.detail.isPane(this.el),this.updateState()}onBackdropClick(t){this._isOpen&&this.lastOnEnd<t.timeStamp-100&&t.composedPath&&!t.composedPath().includes(this.menuInnerEl)&&(t.preventDefault(),t.stopPropagation(),this.close())}isOpen(){return Promise.resolve(this._isOpen)}isActive(){return Promise.resolve(this._isActive())}open(t=!0){return this.setOpen(!0,t)}close(t=!0){return this.setOpen(!1,t)}toggle(t=!0){return this.setOpen(!this._isOpen,t)}setOpen(t,i=!0){return C._setOpen(this,t,i)}async _setOpen(t,i=!0){return!(!this._isActive()||this.isAnimating||t===this._isOpen||(this.beforeAnimation(t),await this.loadAnimation(),await this.startAnimation(t,i),this.afterAnimation(t),0))}async loadAnimation(){const t=this.menuInnerEl.offsetWidth;t===this.width&&void 0!==this.animation||(this.width=t,this.animation&&(this.animation.destroy(),this.animation=void 0),this.animation=await C._createAnimation(this.type,this),l.getBoolean("animated",!0)||this.animation.duration(0),this.animation.fill("both"))}async startAnimation(t,i){const n=!t,e=c(this),r="ios"===e?"cubic-bezier(0.32,0.72,0,1)":"cubic-bezier(0.0,0.0,0.2,1)",o="ios"===e?"cubic-bezier(1, 0, 0.68, 0.28)":"cubic-bezier(0.4, 0, 0.6, 1)",s=this.animation.direction(n?"reverse":"normal").easing(n?o:r).onFinish(()=>{"reverse"===s.getDirection()&&s.direction("normal")});i?await s.play():s.play({sync:!0})}_isActive(){return!this.disabled&&!this.isPaneVisible}canSwipe(){return this.swipeGesture&&!this.isAnimating&&this._isActive()}canStart(t){return!(document.querySelector("ion-modal.show-modal")||!this.canSwipe())&&(!!this._isOpen||!C._getOpenSync()&&dt(window,t.currentX,this.isEndSide,this.maxEdgeStart))}onWillStart(){return this.beforeAnimation(!this._isOpen),this.loadAnimation()}onStart(){this.isAnimating&&this.animation?this.animation.progressStart(!0,this._isOpen?1:0):b(!1,"isAnimating has to be true")}onMove(t){if(!this.isAnimating||!this.animation)return void b(!1,"isAnimating has to be true");const i=ht(t.deltaX,this._isOpen,this.isEndSide)/this.width;this.animation.progressStep(this._isOpen?1-i:i)}onEnd(t){if(!this.isAnimating||!this.animation)return void b(!1,"isAnimating has to be true");const i=this._isOpen,n=this.isEndSide,e=ht(t.deltaX,i,n),r=this.width,o=e/r,s=t.velocityX,a=r/2,c=s>=0&&(s>.2||t.deltaX>a),l=s<=0&&(s<-.2||t.deltaX<-a),u=i?n?c:l:n?l:c;let h=!i&&u;i&&!u&&(h=!0),this.lastOnEnd=t.currentTime;let d=u?.001:-.001;d+=E([0,0],[.4,0],[.6,1],[1,1],g(0,o<0?.01:o,.9999))[0]||0;const f=this._isOpen?!u:u;this.animation.easing("cubic-bezier(0.4, 0.0, 0.6, 1)").onFinish(()=>this.afterAnimation(h),{oneTimeCallback:!0}).progressEnd(f?1:0,this._isOpen?1-d:d,300)}beforeAnimation(t){b(!this.isAnimating,"_before() should not be called while animating"),this.el.classList.add(ft),this.backdropEl&&this.backdropEl.classList.add(pt),this.blocker.block(),this.isAnimating=!0,t?this.ionWillOpen.emit():this.ionWillClose.emit()}afterAnimation(t){b(this.isAnimating,"_before() should be called while animating"),this._isOpen=t,this.isAnimating=!1,this._isOpen||this.blocker.unblock(),t?(this.contentEl&&this.contentEl.classList.add(mt),this.ionDidOpen.emit()):(this.el.classList.remove(ft),this.contentEl&&this.contentEl.classList.remove(mt),this.backdropEl&&this.backdropEl.classList.remove(pt),this.animation&&this.animation.stop(),this.ionDidClose.emit())}updateState(){const t=this._isActive();this.gesture&&this.gesture.enable(t&&this.swipeGesture),!t&&this._isOpen&&this.forceClosing(),this.disabled||C._setActiveMenu(this),b(!this.isAnimating,"can not be animating")}forceClosing(){b(this._isOpen,"menu cannot be closed"),this.isAnimating=!0,this.animation.direction("reverse").play({sync:!0}),this.afterAnimation(!1)}render(){const{isEndSide:t,type:i,disabled:r,isPaneVisible:o}=this,s=c(this);return n(e,{role:"navigation",class:{[s]:!0,[`menu-type-${i}`]:!0,"menu-enabled":!r,"menu-side-end":t,"menu-side-start":!t,"menu-pane-visible":o}},n("div",{class:"menu-inner",ref:t=>this.menuInnerEl=t},n("slot",null)),n("ion-backdrop",{ref:t=>this.backdropEl=t,class:"menu-backdrop",tappable:!1,stopPropagation:!1}))}get el(){return r(this)}static get watchers(){return{type:["typeChanged"],disabled:["disabledChanged"],side:["sideChanged"],swipeGesture:["swipeGestureChanged"]}}},ht=(t,i,n)=>Math.max(0,i!==n?-t:t),dt=(t,i,n,e)=>n?i>=t.innerWidth-e:i<=e,ft="show-menu",pt="show-backdrop",mt="menu-content-open";ut.style={md:":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{left:0;right:auto;top:0;bottom:0;-webkit-transform:translate3d(-9999px,  0,  0);transform:translate3d(-9999px,  0,  0);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}[dir=rtl] .menu-inner,:host-context([dir=rtl]) .menu-inner{left:unset;right:unset;left:auto;right:0}[dir=rtl] .menu-inner,:host-context([dir=rtl]) .menu-inner{-webkit-transform:translate3d(calc(-1 * -9999px),  0,  0);transform:translate3d(calc(-1 * -9999px),  0,  0)}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;right:auto;left:0}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;right:0;left:auto;}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){width:var(--width);min-width:var(--min-width);max-width:var(--max-width)}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none !important;transform:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}:host(.menu-pane-visible) ion-backdrop{display:hidden !important;}:host(.menu-type-overlay) .menu-inner{-webkit-box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18);box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18)}"};class vt{constructor(t,i){this.component=t,this.params=i,this.state=1}async init(t){if(this.state=2,!this.element){const i=this.component;this.element=await A(this.delegate,t,i,["ion-page","ion-page-invisible"],this.params)}}_destroy(){b(3!==this.state,"view state must be ATTACHED");const t=this.element;t&&(this.delegate?this.delegate.removeViewFromDom(t.parentElement,t):t.remove()),this.nav=void 0,this.state=3}}const bt=(t,i,n)=>{if(!t)return!1;if(t.component!==i)return!1;const e=t.params;if(e===n)return!0;if(!e&&!n)return!0;if(!e||!n)return!1;const r=Object.keys(e),o=Object.keys(n);if(r.length!==o.length)return!1;for(const s of r)if(e[s]!==n[s])return!1;return!0},gt=(t,i)=>t?t instanceof vt?t:new vt(t,i):null,wt=class{constructor(n){t(this,n),this.transInstr=[],this.animationEnabled=!0,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.animated=!0,this.ionNavWillLoad=i(this,"ionNavWillLoad",7),this.ionNavWillChange=i(this,"ionNavWillChange",3),this.ionNavDidChange=i(this,"ionNavDidChange",3)}swipeGestureChanged(){this.gesture&&this.gesture.enable(!0===this.swipeGesture)}rootChanged(){void 0!==this.root&&(this.useRouter||this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=!!document.querySelector("ion-router")&&!this.el.closest("[no-router]"),void 0===this.swipeGesture){const t=c(this);this.swipeGesture=l.getBoolean("swipeBackEnabled","ios"===t)}this.ionNavWillLoad.emit()}async componentDidLoad(){this.rootChanged(),this.gesture=(await __sc_import_app("./p-b73b1b98.js")).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}componentDidUnload(){for(const t of this.views)I(t.element,P),t._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=this.views.length=0,this.destroyed=!0}push(t,i,n,e){return this.queueTrns({insertStart:-1,insertViews:[{page:t,params:i}],opts:n},e)}insert(t,i,n,e,r){return this.queueTrns({insertStart:t,insertViews:[{page:i,params:n}],opts:e},r)}insertPages(t,i,n,e){return this.queueTrns({insertStart:t,insertViews:i,opts:n},e)}pop(t,i){return this.queueTrns({removeStart:-1,removeCount:1,opts:t},i)}popTo(t,i,n){const e={removeStart:-1,removeCount:-1,opts:i};return"object"==typeof t&&t.component?(e.removeView=t,e.removeStart=1):"number"==typeof t&&(e.removeStart=t+1),this.queueTrns(e,n)}popToRoot(t,i){return this.queueTrns({removeStart:1,removeCount:-1,opts:t},i)}removeIndex(t,i=1,n,e){return this.queueTrns({removeStart:t,removeCount:i,opts:n},e)}setRoot(t,i,n,e){return this.setPages([{page:t,params:i}],n,e)}setPages(t,i,n){return null==i&&(i={}),!0!==i.animated&&(i.animated=!1),this.queueTrns({insertStart:0,insertViews:t,removeStart:0,removeCount:-1,opts:i},n)}setRouteId(t,i,n){const e=this.getActiveSync();if(bt(e,t,i))return Promise.resolve({changed:!1,element:e.element});let r;const o=new Promise(t=>r=t);let s;const a={updateURL:!1,viewIsReady:t=>{let i;const n=new Promise(t=>i=t);return r({changed:!0,element:t,markVisible:async()=>{i(),await s}}),n}};if("root"===n)s=this.setRoot(t,i,a);else{const e=this.views.find(n=>bt(n,t,i));e?s=this.popTo(e,Object.assign(Object.assign({},a),{direction:"back"})):"forward"===n?s=this.push(t,i,a):"back"===n&&(s=this.setRoot(t,i,Object.assign(Object.assign({},a),{direction:"back",animated:!0})))}return o}async getRouteId(){const t=this.getActiveSync();return t?{id:t.element.tagName,params:t.params,element:t.element}:void 0}getActive(){return Promise.resolve(this.getActiveSync())}getByIndex(t){return Promise.resolve(this.views[t])}canGoBack(t){return Promise.resolve(this.canGoBackSync(t))}getPrevious(t){return Promise.resolve(this.getPreviousSync(t))}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(t=this.getActiveSync()){return!(!t||!this.getPreviousSync(t))}getPreviousSync(t=this.getActiveSync()){if(!t)return;const i=this.views,n=i.indexOf(t);return n>0?i[n-1]:void 0}queueTrns(t,i){if(this.isTransitioning&&null!=t.opts&&t.opts.skipIfBusy)return Promise.resolve(!1);const n=new Promise((i,n)=>{t.resolve=i,t.reject=n});return t.done=i,t.insertViews&&0===t.insertViews.length&&(t.insertViews=void 0),this.transInstr.push(t),this.nextTrns(),n}success(t,i){if(this.destroyed)this.fireError("nav controller was destroyed",i);else if(i.done&&i.done(t.hasCompleted,t.requiresTransition,t.enteringView,t.leavingView,t.direction),i.resolve(t.hasCompleted),!1!==i.opts.updateURL&&this.useRouter){const i=document.querySelector("ion-router");i&&i.navChanged("back"===t.direction?"back":"forward")}}failed(t,i){this.destroyed?this.fireError("nav controller was destroyed",i):(this.transInstr.length=0,this.fireError(t,i))}fireError(t,i){i.done&&i.done(!1,!1,t),i.reject&&!this.destroyed?i.reject(t):i.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const t=this.transInstr.shift();return!!t&&(this.runTransition(t),!0)}async runTransition(t){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(t);const i=this.getActiveSync(),n=this.getEnteringView(t,i);if(!i&&!n)throw new Error("no views in the stack to be removed");n&&1===n.state&&await n.init(this.el),this.postViewInit(n,i,t);const e=(t.enteringRequiresTransition||t.leavingRequiresTransition)&&n!==i?await this.transition(n,i,t):{hasCompleted:!0,requiresTransition:!1};this.success(e,t),this.ionNavDidChange.emit()}catch(i){this.failed(i,t)}this.isTransitioning=!1,this.nextTrns()}prepareTI(t){const i=this.views.length;if(t.opts=t.opts||{},void 0===t.opts.delegate&&(t.opts.delegate=this.delegate),void 0!==t.removeView){b(void 0!==t.removeStart,"removeView needs removeStart"),b(void 0!==t.removeCount,"removeView needs removeCount");const i=this.views.indexOf(t.removeView);if(i<0)throw new Error("removeView was not found");t.removeStart+=i}void 0!==t.removeStart&&(t.removeStart<0&&(t.removeStart=i-1),t.removeCount<0&&(t.removeCount=i-t.removeStart),t.leavingRequiresTransition=t.removeCount>0&&t.removeStart+t.removeCount===i),t.insertViews&&((t.insertStart<0||t.insertStart>i)&&(t.insertStart=i),t.enteringRequiresTransition=t.insertStart===i);const n=t.insertViews;if(!n)return;b(n.length>0,"length can not be zero");const e=n.map(t=>t instanceof vt?t:"page"in t?gt(t.page,t.params):gt(t,void 0)).filter(t=>null!==t);if(0===e.length)throw new Error("invalid views to insert");for(const r of e){r.delegate=t.opts.delegate;const i=r.nav;if(i&&i!==this)throw new Error("inserted view was already inserted");if(3===r.state)throw new Error("inserted view was already destroyed")}t.insertViews=e}getEnteringView(t,i){const n=t.insertViews;if(void 0!==n)return n[n.length-1];const e=t.removeStart;if(void 0!==e){const n=this.views,r=e+t.removeCount;for(let t=n.length-1;t>=0;t--){const o=n[t];if((t<e||t>=r)&&o!==i)return o}}}postViewInit(t,i,n){b(i||t,"Both leavingView and enteringView are null"),b(n.resolve,"resolve must be valid"),b(n.reject,"reject must be valid");const e=n.opts,r=n.insertViews,o=n.removeStart,s=n.removeCount;let a;if(void 0!==o&&void 0!==s){b(o>=0,"removeStart can not be negative"),b(s>=0,"removeCount can not be negative"),a=[];for(let n=0;n<s;n++){const e=this.views[n+o];e&&e!==t&&e!==i&&a.push(e)}e.direction=e.direction||"back"}const c=this.views.length+(void 0!==r?r.length:0)-(void 0!==s?s:0);if(b(c>=0,"final balance can not be negative"),0===c)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(r){let t=n.insertStart;for(const i of r)this.insertViewAt(i,t),t++;n.enteringRequiresTransition&&(e.direction=e.direction||"forward")}if(a&&a.length>0){for(const t of a)I(t.element,_),I(t.element,D),I(t.element,P);for(const t of a)this.destroyView(t)}}async transition(t,i,n){const e=n.opts,r=e.progressAnimation?t=>this.sbAni=t:void 0,o=c(this),s=t.element,a=i&&i.element,u=Object.assign({mode:o,showGoBack:this.canGoBackSync(t),baseEl:this.el,animationBuilder:this.animation||e.animationBuilder||l.get("navAnimation"),progressCallback:r,animated:this.animated&&l.getBoolean("animated",!0),enteringEl:s,leavingEl:a},e),{hasCompleted:h}=await M(u);return this.transitionFinish(h,t,i,e)}transitionFinish(t,i,n,e){const r=t?i:n;return r&&this.cleanup(r),{hasCompleted:t,requiresTransition:!0,enteringView:i,leavingView:n,direction:e.direction}}insertViewAt(t,i){const n=this.views,e=n.indexOf(t);e>-1?(b(t.nav===this,"view is not part of the nav"),n.splice(i,0,n.splice(e,1)[0])):(b(!t.nav,"nav is used"),t.nav=this,n.splice(i,0,t))}removeView(t){b(2===t.state||3===t.state,"view state should be loaded or destroyed");const i=this.views,n=i.indexOf(t);b(n>-1,"view must be part of the stack"),n>=0&&i.splice(n,1)}destroyView(t){t._destroy(),this.removeView(t)}cleanup(t){if(this.destroyed)return;const i=this.views,n=i.indexOf(t);for(let e=i.length-1;e>=0;e--){const t=i[e],r=t.element;e>n?(I(r,P),this.destroyView(t)):e<n&&T(r,!0)}}canStart(){return!!this.swipeGesture&&!this.isTransitioning&&0===this.transInstr.length&&this.animationEnabled&&this.canGoBackSync()}onStart(){this.queueTrns({removeStart:-1,removeCount:1,opts:{direction:"back",progressAnimation:!0}},void 0)}onMove(t){this.sbAni&&this.sbAni.progressStep(t)}onEnd(t,i,n){if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish(()=>{this.animationEnabled=!0},{oneTimeCallback:!0});let e=t?-.001:.001;t?e+=E([0,0],[.32,.72],[0,1],[1,1],i)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),e+=E([0,0],[1,0],[.68,.28],[1,1],i)[0]),this.sbAni.progressEnd(t?1:0,e,n)}}render(){return n("slot",null)}get el(){return r(this)}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}};wt.style=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}";const yt=class{constructor(i){t(this,i),this.type="bounded"}async addRipple(t,i){return new Promise(n=>{o(()=>{const e=this.el.getBoundingClientRect(),r=e.width,o=e.height,s=Math.sqrt(r*r+o*o),c=Math.max(o,r),l=this.unbounded?c:s+kt,u=Math.floor(c*jt),h=l/u;let d=t-e.left,f=i-e.top;this.unbounded&&(d=.5*r,f=.5*o);const p=d-.5*u,m=f-.5*u,v=.5*r-d,b=.5*o-f;a(()=>{const t=document.createElement("div");t.classList.add("ripple-effect");const i=t.style;i.top=m+"px",i.left=p+"px",i.width=i.height=u+"px",i.setProperty("--final-scale",`${h}`),i.setProperty("--translate-end",`${v}px, ${b}px`),(this.el.shadowRoot||this.el).appendChild(t),setTimeout(()=>{n(()=>{xt(t)})},325)})})})}get unbounded(){return"unbounded"===this.type}render(){const t=c(this);return n(e,{role:"presentation",class:{[t]:!0,unbounded:this.unbounded}})}get el(){return r(this)}},xt=t=>{t.classList.add("fade-out"),setTimeout(()=>{t.remove()},200)},kt=10,jt=.5;yt.style=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}";const Ot=class{constructor(n){t(this,n),this.url="",this.ionRouteDataChanged=i(this,"ionRouteDataChanged",7)}onUpdate(t){this.ionRouteDataChanged.emit(t)}onComponentProps(t,i){if(t===i)return;const n=t?Object.keys(t):[],e=i?Object.keys(i):[];if(n.length===e.length){for(const r of n)if(t[r]!==i[r])return void this.onUpdate(t)}else this.onUpdate(t)}connectedCallback(){this.ionRouteDataChanged.emit()}static get watchers(){return{url:["onUpdate"],component:["onUpdate"],componentProps:["onComponentProps"]}}},St=t=>"/"+t.filter(t=>t.length>0).join("/"),Et=t=>{if(null==t)return[""];const i=t.split("/").map(t=>t.trim()).filter(t=>t.length>0);return 0===i.length?[""]:i},Ct=async(t,i,n,e,r=!1)=>{try{const o=Mt(t);if(e>=i.length||!o)return r;await o.componentOnReady();const s=i[e],a=await o.setRouteId(s.id,s.params,n);return a.changed&&(n="root",r=!0),r=await Ct(a.element,i,n,e+1,r),a.markVisible&&await a.markVisible(),r}catch(o){return console.error(o),!1}},It=":not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet",Mt=t=>{if(!t)return;if(t.matches(It))return t;return t.querySelector(It)||void 0},Tt=(t,i)=>i.find(i=>((t,i)=>{const{from:n,to:e}=i;if(void 0===e)return!1;if(n.length>t.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if("*"===i)return!0;if(i!==t[r])return!1}return n.length===t.length})(t,i)),Pt=(t,i)=>{const n=Math.min(t.length,i.length);let e=0;for(;e<n&&t[e].toLowerCase()===i[e].id;e++);return e},_t=(t,i)=>{const n=new Rt(t);let e,r=!1;for(let o=0;o<i.length;o++){const t=i[o].path;if(""===t[0])r=!0;else{for(const i of t){const t=n.next();if(":"===i[0]){if(""===t)return null;e=e||[],(e[o]||(e[o]={}))[i.slice(1)]=t}else if(t!==i)return null}r=!1}}return r&&r!==(""===n.next())?null:e?i.map((t,i)=>({id:t.id,path:t.path,params:Dt(t.params,e[i])})):i},Dt=(t,i)=>!t&&i?i:t&&!i?t:t&&i?Object.assign(Object.assign({},t),i):void 0,At=t=>{let i=1,n=1;for(const e of t)for(const t of e.path)":"===t[0]?i+=Math.pow(1,n):""!==t&&(i+=Math.pow(2,n)),n++;return i};class Rt{constructor(t){this.path=t.slice()}next(){return this.path.length>0?this.path.shift():""}}const zt=t=>Array.from(t.children).filter(t=>"ION-ROUTE-REDIRECT"===t.tagName).map(t=>{const i=Gt(t,"to");return{from:Et(Gt(t,"from")),to:null==i?void 0:Et(i)}}),Nt=t=>Ft(Lt(t)),Lt=(t,i=t)=>Array.from(i.children).filter(t=>"ION-ROUTE"===t.tagName&&t.component).map(i=>{const n=Gt(i,"component");if(null==n)throw new Error("component missing in ion-route");return{path:Et(Gt(i,"url")),id:n.toLowerCase(),params:i.componentProps,children:Lt(t,i)}}),Gt=(t,i)=>i in t?t[i]:t.hasAttribute(i)?t.getAttribute(i):null,Ft=t=>{const i=[];for(const n of t)Ut([],i,n);return i},Ut=(t,i,n)=>{const e=t.slice();if(e.push({id:n.id,path:n.path,params:n.params}),0!==n.children.length)for(const r of n.children)Ut(e,i,r);else i.push(e)},Bt=class{constructor(n){t(this,n),this.previousPath=null,this.busy=!1,this.state=0,this.lastState=0,this.root="/",this.useHash=!0,this.ionRouteWillChange=i(this,"ionRouteWillChange",7),this.ionRouteDidChange=i(this,"ionRouteDidChange",7)}async componentWillLoad(){console.debug("[ion-router] router will load"),await(Mt(document.body)?Promise.resolve():new Promise(t=>{window.addEventListener("ionNavWillLoad",t,{once:!0})})),console.debug("[ion-router] found nav"),await this.onRoutesChanged()}componentDidLoad(){window.addEventListener("ionRouteRedirectChanged",w(this.onRedirectChanged.bind(this),10)),window.addEventListener("ionRouteDataChanged",w(this.onRoutesChanged.bind(this),100))}onPopState(){const t=this.historyDirection(),i=this.getPath();return console.debug("[ion-router] URL changed -> update nav",i,t),this.writeNavStateRoot(i,t)}onBackButton(t){t.detail.register(0,()=>this.back())}push(t,i="forward"){t.startsWith(".")&&(t=new URL(t,window.location.href).pathname),console.debug("[ion-router] URL pushed -> updating nav",t,i);const n=Et(t);return this.setPath(n,i),this.writeNavStateRoot(n,i)}back(){return window.history.back(),Promise.resolve(this.waitPromise)}async printDebug(){console.debug("CURRENT PATH",this.getPath()),console.debug("PREVIOUS PATH",this.previousPath),(t=>{console.group(`[ion-core] ROUTES[${t.length}]`);for(const i of t){const t=[];i.forEach(i=>t.push(...i.path));const n=i.map(t=>t.id);console.debug(`%c ${St(t)}`,"font-weight: bold; padding-left: 20px","=>\t",`(${n.join(", ")})`)}console.groupEnd()})(Nt(this.el)),(t=>{console.group(`[ion-core] REDIRECTS[${t.length}]`);for(const i of t)i.to&&console.debug("FROM: ",`$c ${St(i.from)}`,"font-weight: bold"," TO: ",`$c ${St(i.to)}`,"font-weight: bold");console.groupEnd()})(zt(this.el))}async navChanged(t){if(this.busy)return console.warn("[ion-router] router is busy, navChanged was cancelled"),!1;const{ids:i,outlet:n}=await(async()=>{const t=[];let i,n=window.document.body;for(;i=Mt(n),i;){const e=await i.getRouteId();if(!e)break;n=e.element,e.element=void 0,t.push(e)}return{ids:t,outlet:i}})(),e=((t,i)=>{let n=null,e=0;const r=t.map(t=>t.id);for(const o of i){const t=Pt(r,o);t>e&&(n=o,e=t)}return n?n.map((i,n)=>({id:i.id,path:i.path,params:Dt(i.params,t[n]&&t[n].params)})):null})(i,Nt(this.el));if(!e)return console.warn("[ion-router] no matching URL for ",i.map(t=>t.id)),!1;const r=(t=>{const i=[];for(const n of t)for(const t of n.path)if(":"===t[0]){const e=n.params&&n.params[t.slice(1)];if(!e)return null;i.push(e)}else""!==t&&i.push(t);return i})(e);return r?(console.debug("[ion-router] nav changed -> update URL",i,r),this.setPath(r,t),await this.safeWriteNavState(n,e,"root",r,null,i.length),!0):(console.warn("[ion-router] router could not match path because some required param is missing"),!1)}onRedirectChanged(){const t=this.getPath();t&&Tt(t,zt(this.el))&&this.writeNavStateRoot(t,"root")}onRoutesChanged(){return this.writeNavStateRoot(this.getPath(),"root")}historyDirection(){const t=window;null===t.history.state&&(this.state++,t.history.replaceState(this.state,t.document.title,t.document.location&&t.document.location.href));const i=t.history.state,n=this.lastState;return this.lastState=i,i>n?"forward":i<n?"back":"root"}async writeNavStateRoot(t,i){if(!t)return console.error("[ion-router] URL is not part of the routing set"),!1;const n=zt(this.el),e=Tt(t,n);let r=null;e&&(this.setPath(e.to,i),r=e.from,t=e.to);const o=((t,i)=>{let n=null,e=0;for(const r of i){const i=_t(t,r);if(null!==i){const t=At(i);t>e&&(e=t,n=i)}}return n})(t,Nt(this.el));return o?this.safeWriteNavState(document.body,o,i,t,r):(console.error("[ion-router] the path does not match any route"),!1)}async safeWriteNavState(t,i,n,e,r,o=0){const s=await this.lock();let a=!1;try{a=await this.writeNavState(t,i,n,e,r,o)}catch(c){console.error(c)}return s(),a}async lock(){const t=this.waitPromise;let i;return this.waitPromise=new Promise(t=>i=t),void 0!==t&&await t,i}async writeNavState(t,i,n,e,r,o=0){if(this.busy)return console.warn("[ion-router] router is busy, transition was cancelled"),!1;this.busy=!0;const s=this.routeChangeEvent(e,r);s&&this.ionRouteWillChange.emit(s);const a=await Ct(t,i,n,o);return this.busy=!1,a&&console.debug("[ion-router] route changed",e),s&&this.ionRouteDidChange.emit(s),a}setPath(t,i){this.state++,((t,i,n,e,r,o)=>{let s=St([...Et(this.root),...e]);n&&(s="#"+s),"forward"===r?t.pushState(o,"",s):t.replaceState(o,"",s)})(window.history,0,this.useHash,t,i,this.state)}getPath(){return((t,i)=>{let n=t.pathname;if(this.useHash){const i=t.hash;n="#"===i[0]?i.slice(1):""}return((t,i)=>{if(t.length>i.length)return null;if(t.length<=1&&""===t[0])return i;for(let n=0;n<t.length;n++)if(t[n].length>0&&t[n]!==i[n])return null;return i.length===t.length?[""]:i.slice(t.length)})(Et(i),Et(n))})(window.location,this.root)}routeChangeEvent(t,i){const n=this.previousPath,e=St(t);return this.previousPath=e,e===n?null:{from:n,redirectedFrom:i?St(i):null,to:e}}get el(){return r(this)}};export{R as app_chat,U as app_root,B as ion_app,Y as ion_backdrop,V as ion_button,Z as ion_card,H as ion_card_content,Q as ion_card_header,X as ion_card_subtitle,$ as ion_content,et as ion_icon,st as ion_input,ct as ion_item,lt as ion_label,ut as ion_menu,wt as ion_nav,yt as ion_ripple_effect,Ot as ion_route,Bt as ion_router}